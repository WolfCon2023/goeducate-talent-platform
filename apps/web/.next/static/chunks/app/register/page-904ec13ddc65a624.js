(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[454],{2883:(e,r,t)=>{"use strict";t.d(r,{X:()=>a,n:()=>l});var s=t(7011);class a extends Error{constructor(e){super(e.message),this.name="ApiFetchError",this.status=e.status,this.code=e.code,this.details=e.details}}async function l(e,r){var t,l,n,i,o;let c=function(){let e=s.env.NEXT_PUBLIC_API_URL;if(!e)throw Error("Missing NEXT_PUBLIC_API_URL");return e.replace(/\/+$/,"")}(),u=new Headers(null==r?void 0:r.headers);u.set("content-type","application/json"),(null==r?void 0:r.token)&&u.set("authorization","Bearer ".concat(r.token));let d=await fetch("".concat(c).concat(e),{...r,headers:u,cache:"no-store"});if(!d.ok){let e=await d.json().catch(()=>({}));throw new a({message:null!=(i=null==(t=e.error)?void 0:t.message)?i:"Request failed: ".concat(d.status),status:d.status,code:null==(l=e.error)?void 0:l.code,details:null==(n=e.error)?void 0:n.details})}if(204===d.status)return;if(!(null!=(o=d.headers.get("content-type"))?o:"").includes("application/json")){let e=await d.text();if(!e)return;return e}let m=await d.text();if(m)return JSON.parse(m)}},3200:(e,r,t)=>{"use strict";t.d(r,{B:()=>l,_:()=>a});var s=t(2883);function a(e){if(e instanceof s.X){let r=e.details,t=(null==r?void 0:r.fieldErrors)&&"object"==typeof r.fieldErrors?r.fieldErrors:void 0,s=Array.isArray(null==r?void 0:r.formErrors)?r.formErrors:[];return{formError:[e.message,...s].filter(Boolean).join(" ")||e.message,fieldErrors:t}}return e instanceof Error?{formError:e.message}:{formError:"Something went wrong."}}function l(e,r){var t;let s=null==e?void 0:e[r];return s&&Array.isArray(s)&&0!==s.length&&null!=(t=s[0])?t:null}},4542:(e,r,t)=>{"use strict";t.d(r,{$n:()=>a,JU:()=>n,Zp:()=>i,pd:()=>l});var s=t(4568);function a(e){let{className:r="",...t}=e;return(0,s.jsx)("button",{className:"rounded-md bg-indigo-600 px-4 py-2 text-sm font-medium text-white hover:bg-indigo-500 disabled:opacity-60 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--color-primary-600)] ".concat(r),...t})}function l(e){let{className:r="",...t}=e;return(0,s.jsx)("input",{className:"w-full rounded-md border border-[color:var(--border)] bg-[var(--surface-soft)] px-3 py-2 text-sm text-[color:var(--foreground)] placeholder:text-[color:var(--muted-3)] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--color-primary-600)] ".concat(r),...t})}function n(e){return(0,s.jsx)("label",{htmlFor:e.htmlFor,className:"text-sm font-medium text-[color:var(--muted)]",children:e.children})}function i(e){return(0,s.jsx)("div",{className:"rounded-2xl border border-[color:var(--border)] bg-[var(--surface)] p-6",children:e.children})}},5979:(e,r,t)=>{"use strict";t.d(r,{QG:()=>i,_u:()=>n,bZ:()=>c,iD:()=>a,ki:()=>o});let s="goeducate_access_token";function a(){return window.localStorage.getItem(s)}function l(e){let r="=".repeat((4-e.length%4)%4);return decodeURIComponent(atob((e+r).replace(/-/g,"+").replace(/_/g,"/")).split("").map(e=>"%".concat(e.charCodeAt(0).toString(16).padStart(2,"0"))).join(""))}function n(e){if(!e)return null;let r=e.split(".");if(3!==r.length)return null;try{var t;let e=JSON.parse(l(null!=(t=r[1])?t:""));return"string"==typeof(null==e?void 0:e.role)?e.role:null}catch(e){return null}}function i(e){if(!e)return null;let r=e.split(".");if(3!==r.length)return null;try{var t;let e=JSON.parse(l(null!=(t=r[1])?t:""));return"string"==typeof(null==e?void 0:e.sub)?e.sub:null}catch(e){return null}}function o(e){window.localStorage.setItem(s,e)}function c(){window.localStorage.removeItem(s)}},6015:(e,r,t)=>{"use strict";t.d(r,{N:()=>l,b:()=>n});var s=t(4568),a=t(3200);function l(e){var r,t;let a=Object.entries(null!=(r=e.fieldErrors)?r:{}).filter(e=>{let[,r]=e;return Array.isArray(r)&&r.length>0});return e.formError||a.length>0?(0,s.jsxs)("div",{className:"rounded-xl border border-red-400/30 bg-red-500/10 p-4",children:[(0,s.jsx)("div",{className:"text-sm font-semibold text-red-200",children:null!=(t=e.title)?t:"Please fix the following:"}),(0,s.jsxs)("div",{className:"mt-2 grid gap-1 text-sm text-red-100",children:[e.formError?(0,s.jsx)("div",{children:e.formError}):null,a.length?(0,s.jsx)("ul",{className:"list-disc pl-5",children:a.slice(0,8).map(e=>{let[r,t]=e;return(0,s.jsxs)("li",{children:[(0,s.jsxs)("span",{className:"font-semibold",children:[r,":"]})," ",t[0]]},r)})}):null]})]}):null}function n(e){let r=(0,a.B)(e.fieldErrors,e.name);return r?(0,s.jsx)("div",{className:"text-sm text-red-300",children:r}):null}},7065:(e,r,t)=>{Promise.resolve().then(t.bind(t,9912))},7541:(e,r,t)=>{"use strict";var s=t(3041);t.o(s,"useParams")&&t.d(r,{useParams:function(){return s.useParams}}),t.o(s,"usePathname")&&t.d(r,{usePathname:function(){return s.usePathname}}),t.o(s,"useRouter")&&t.d(r,{useRouter:function(){return s.useRouter}}),t.o(s,"useSearchParams")&&t.d(r,{useSearchParams:function(){return s.useSearchParams}})},9912:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>h});var s=t(4568),a=t(9664),l=t.n(a),n=t(7541),i=t(7620),o=t(6015),c=t(4542),u=t(2883),d=t(5979),m=t(3200);function h(){let e=(0,n.useRouter)();(0,i.useEffect)(()=>{e.replace("/request-access")},[e]);let[r,t]=(0,i.useState)(""),[a,h]=(0,i.useState)(""),[f,g]=(0,i.useState)("player"),[p,v]=(0,i.useState)(""),[x,b]=(0,i.useState)(""),[j,N]=(0,i.useState)(null),[w,y]=(0,i.useState)(void 0),[E,S]=(0,i.useState)(!1);async function C(t){t.preventDefault(),N(null),y(void 0),S(!0);try{let t={};if(r.trim()||(t.email=["Email is required."]),(!a||a.length<8)&&(t.password=["Password must be at least 8 characters."]),"coach"!==f||p.trim()||(t.firstName=["First name is required for coaches."]),"coach"!==f||x.trim()||(t.lastName=["Last name is required for coaches."]),Object.keys(t).length>0)return void y(t);let s=await (0,u.n)("/auth/register",{method:"POST",body:JSON.stringify({email:r,password:a,role:f,..."coach"===f?{firstName:p.trim(),lastName:x.trim()}:{}})});(0,d.ki)(s.token),e.push("coach"===f?"/coach":"/player")}catch(r){var s;let e=(0,m._)(r);N(null!=(s=e.formError)?s:"Registration failed"),y(e.fieldErrors)}finally{S(!1)}}return(0,s.jsx)("div",{className:"mx-auto max-w-md",children:(0,s.jsxs)(c.Zp,{children:[(0,s.jsx)("h1",{className:"text-xl font-semibold",children:"Create account"}),(0,s.jsxs)("p",{className:"mt-1 text-sm text-white/80",children:["Registration is invite-only. Youâ€™ll be redirected to"," ",(0,s.jsx)(l(),{href:"/request-access",className:"text-indigo-300 hover:text-indigo-200 hover:underline",children:"Request access"}),"."]}),(0,s.jsxs)("form",{onSubmit:C,className:"mt-6 grid gap-4",children:[(0,s.jsx)(o.N,{formError:null!=j?j:void 0,fieldErrors:w}),"coach"===f?(0,s.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(c.JU,{htmlFor:"firstName",children:"First name"}),(0,s.jsx)(c.pd,{id:"firstName",value:p,onChange:e=>v(e.target.value),autoComplete:"given-name"}),(0,s.jsx)(o.b,{name:"firstName",fieldErrors:w})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(c.JU,{htmlFor:"lastName",children:"Last name"}),(0,s.jsx)(c.pd,{id:"lastName",value:x,onChange:e=>b(e.target.value),autoComplete:"family-name"}),(0,s.jsx)(o.b,{name:"lastName",fieldErrors:w})]})]}):null,(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(c.JU,{htmlFor:"email",children:"Email"}),(0,s.jsx)(c.pd,{id:"email",value:r,onChange:e=>t(e.target.value),autoComplete:"email"}),(0,s.jsx)(o.b,{name:"email",fieldErrors:w})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(c.JU,{htmlFor:"password",children:"Password"}),(0,s.jsx)(c.pd,{id:"password",type:"password",value:a,onChange:e=>h(e.target.value),autoComplete:"new-password"}),(0,s.jsx)(o.b,{name:"password",fieldErrors:w})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(c.JU,{htmlFor:"role",children:"Role"}),(0,s.jsxs)("select",{id:"role",className:"w-full rounded-md border border-white/10 bg-white/5 px-3 py-2 text-sm text-white/90 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/60",value:f,onChange:e=>g(e.target.value),children:[(0,s.jsx)("option",{value:"player",children:"Player"}),(0,s.jsx)("option",{value:"coach",children:"Coach"})]})]}),(0,s.jsx)(c.$n,{type:"submit",disabled:E,children:E?"Creating...":"Create account"})]})]})})}}},e=>{e.O(0,[664,587,18,358],()=>e(e.s=7065)),_N_E=e.O()}]);