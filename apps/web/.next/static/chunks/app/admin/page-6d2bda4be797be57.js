(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[698],{140:(e,t,r)=>{"use strict";r.d(t,{AdminEvaluationForms:()=>d});var s=r(4568),a=r(7620),i=r(4542),n=r(8648),l=r(2883),o=r(5979);function c(e){let t=[{key:"physical",label:"Physical",weight:20,traits:[]},{key:"athletic",label:"Athletic",weight:20,traits:[]},{key:"technical",label:"Technical",weight:25,traits:[]},{key:"mental",label:"Mental",weight:20,traits:[]},{key:"intangibles",label:"Intangibles",weight:15,traits:[]}],r={physical:[{key:"size_frame",label:"Size / frame",type:"slider"},{key:"strength",label:"Functional strength",type:"slider"}],athletic:[{key:"speed",label:"Speed",type:"slider"},{key:"agility",label:"Agility / change of direction",type:"slider"}],technical:[{key:"technique",label:"Technique fundamentals",type:"slider"},{key:"consistency",label:"Consistency (rep-to-rep)",type:"slider"}],mental:[{key:"processing",label:"Processing / speed of play",type:"slider"},{key:"decision_making",label:"Decision-making",type:"slider"}],intangibles:[{key:"motor",label:"Motor / effort",type:"slider"},{key:"projection",label:"Projection",type:"slider",required:!1,min:1,max:10,step:1}]};for(let e of t)e.traits=r[e.key];return{title:"Evaluation form – ".concat(e),sport:e,isActive:!0,version:1,strengthsPrompt:"Provide 2–4 strengths with specific evidence (what you saw and where). Use bullet points.\n- Strength 1 (evidence)\n- Strength 2 (evidence)",improvementsPrompt:"Provide 2–4 improvements with actionable coaching points. Use bullet points.\n- Improvement 1 (how to improve)\n- Improvement 2 (how to improve)",notesHelp:"Optional: leave any additional context, caveats, or timecodes.",categories:t}}function d(){let e=(0,n.S)(),[t,r]=(0,a.useState)(!1),[d,u]=(0,a.useState)(!1),[m,h]=(0,a.useState)(null),[v,p]=(0,a.useState)([]),[x,f]=(0,a.useState)(""),[g,b]=(0,a.useState)(!0),[j,y]=(0,a.useState)("football"),[w,N]=(0,a.useState)(()=>c("football")),S=(0,a.useMemo)(()=>w.categories.reduce((e,t)=>e+(Number(t.weight)||0),0),[w.categories]),E=(0,a.useMemo)(()=>w.title.trim()&&w.sport&&5===w.categories.length,[w]);async function C(){h(null),r(!0);try{let e=(0,o.iD)(),t=(0,o._u)(e);if(!e)throw Error("Please login first.");if("admin"!==t)throw Error("Insufficient permissions.");let r=new URLSearchParams;x&&r.set("sport",x),g&&r.set("activeOnly","1");let s=await (0,l.n)("/admin/evaluation-forms?".concat(r.toString()),{token:e});p(s.results)}catch(e){h(e instanceof Error?e.message:"Failed to load evaluation forms")}finally{r(!1)}}async function k(){h(null),u(!0);try{let e=(0,o.iD)(),t=(0,o._u)(e);if(!e)throw Error("Please login first.");if("admin"!==t)throw Error("Insufficient permissions.");let r=await (0,l.n)("/admin/evaluation-forms",{method:"POST",token:e,body:JSON.stringify(w)});p(e=>[r,...e])}catch(e){h(e instanceof Error?e.message:"Failed to create evaluation form")}finally{u(!1)}}async function P(t){if(await e({title:"Delete evaluation form?",message:"This cannot be undone.",confirmText:"Delete",destructive:!0})){h(null);try{let e=(0,o.iD)(),r=(0,o._u)(e);if(!e)throw Error("Please login first.");if("admin"!==r)throw Error("Insufficient permissions.");await (0,l.n)("/admin/evaluation-forms/".concat(encodeURIComponent(t)),{method:"DELETE",token:e}),p(e=>e.filter(e=>e._id!==t))}catch(e){h(e instanceof Error?e.message:"Failed to delete evaluation form")}}}function A(e,t){N(r=>({...r,categories:r.categories.map(r=>r.key===e?{...r,...t}:r)}))}function R(e,t,r){A(e,{traits:w.categories.find(t=>t.key===e).traits.map(e=>e.key===t?{...e,...r}:e)})}return(0,a.useEffect)(()=>{C()},[]),(0,s.jsxs)(i.Zp,{children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",children:"Evaluation forms (universal rubric)"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-[color:var(--muted)]",children:"One active form per sport. Evaluators use it to produce consistent reports."})]}),(0,s.jsx)(i.$n,{type:"button",onClick:C,disabled:t,children:t?"Refreshing...":"Refresh"})]}),m?(0,s.jsx)("p",{className:"mt-4 text-sm text-red-300",children:m}):null,(0,s.jsxs)("div",{className:"mt-6 rounded-2xl border border-[color:var(--border)] bg-[var(--surface-soft)] p-4",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-baseline justify-between gap-3",children:[(0,s.jsx)("div",{className:"text-sm font-semibold text-[color:var(--foreground)]",children:"Create new form"}),(0,s.jsxs)("div",{className:"text-xs text-[color:var(--muted)]",children:["Weights sum: ",S,"% (recommended: 100%)"]})]}),(0,s.jsxs)("div",{className:"mt-4 grid gap-4 lg:grid-cols-3",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(i.JU,{htmlFor:"formTitle",children:"Title"}),(0,s.jsx)(i.pd,{id:"formTitle",value:w.title,onChange:e=>N(t=>({...t,title:e.target.value}))})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(i.JU,{htmlFor:"formSport",children:"Sport"}),(0,s.jsxs)("select",{id:"formSport",className:"w-full rounded-md border border-[color:var(--border)] bg-[var(--surface-soft)] px-3 py-2 text-sm text-[color:var(--foreground)] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--color-primary-600)]",value:j,onChange:e=>{let t=e.target.value;y(t),N(c(t))},children:[(0,s.jsx)("option",{value:"football",children:"Football"}),(0,s.jsx)("option",{value:"basketball",children:"Basketball"}),(0,s.jsx)("option",{value:"volleyball",children:"Volleyball"}),(0,s.jsx)("option",{value:"soccer",children:"Soccer"}),(0,s.jsx)("option",{value:"track",children:"Track"}),(0,s.jsx)("option",{value:"other",children:"Other"})]})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(i.JU,{htmlFor:"formActive",children:"Active"}),(0,s.jsxs)("select",{id:"formActive",className:"w-full rounded-md border border-[color:var(--border)] bg-[var(--surface-soft)] px-3 py-2 text-sm text-[color:var(--foreground)] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--color-primary-600)]",value:w.isActive?"1":"0",onChange:e=>N(t=>({...t,isActive:"1"===e.target.value})),children:[(0,s.jsx)("option",{value:"1",children:"Active (recommended)"}),(0,s.jsx)("option",{value:"0",children:"Inactive"})]})]})]}),(0,s.jsxs)("div",{className:"mt-4 grid gap-4 lg:grid-cols-2",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(i.JU,{htmlFor:"strengthsPrompt",children:"Strengths prompt"}),(0,s.jsx)("textarea",{id:"strengthsPrompt",className:"min-h-24 w-full rounded-md border border-[color:var(--border)] bg-[var(--surface)] px-3 py-2 text-sm text-[color:var(--foreground)] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--color-primary-600)]",value:w.strengthsPrompt,onChange:e=>N(t=>({...t,strengthsPrompt:e.target.value}))})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(i.JU,{htmlFor:"improvementsPrompt",children:"Improvements prompt"}),(0,s.jsx)("textarea",{id:"improvementsPrompt",className:"min-h-24 w-full rounded-md border border-[color:var(--border)] bg-[var(--surface)] px-3 py-2 text-sm text-[color:var(--foreground)] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--color-primary-600)]",value:w.improvementsPrompt,onChange:e=>N(t=>({...t,improvementsPrompt:e.target.value}))})]})]}),(0,s.jsx)("div",{className:"mt-4 grid gap-4",children:w.categories.map(e=>(0,s.jsxs)("div",{className:"rounded-2xl border border-[color:var(--border)] bg-[var(--surface)] p-4",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-baseline justify-between gap-3",children:[(0,s.jsx)("div",{className:"font-semibold text-[color:var(--foreground)]",children:e.label}),(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,s.jsx)("span",{className:"text-[color:var(--muted)]",children:"Weight"}),(0,s.jsx)(i.pd,{className:"max-w-24",value:String(e.weight),type:"number",onChange:t=>A(e.key,{weight:Number(t.target.value)})}),(0,s.jsx)(i.$n,{type:"button",className:"border border-white/15 bg-white/5 text-white hover:bg-white/10",onClick:()=>{var t;A(t=e.key,{traits:[...w.categories.find(e=>e.key===t).traits,{key:"".concat(t,"_trait_").concat(Date.now()),label:"New trait",type:"slider",min:1,max:10,step:1}]})},children:"Add trait"})]})]}),(0,s.jsxs)("div",{className:"mt-3 grid gap-3",children:[e.traits.map(t=>{var r;return(0,s.jsxs)("div",{className:"rounded-xl border border-[color:var(--border)] bg-[var(--surface-soft)] p-3",children:[(0,s.jsxs)("div",{className:"grid gap-3 lg:grid-cols-5",children:[(0,s.jsxs)("div",{className:"grid gap-2 lg:col-span-1",children:[(0,s.jsx)(i.JU,{htmlFor:"".concat(e.key,"-").concat(t.key,"-key"),children:"Key"}),(0,s.jsx)(i.pd,{id:"".concat(e.key,"-").concat(t.key,"-key"),value:t.key,onChange:r=>R(e.key,t.key,{key:r.target.value})})]}),(0,s.jsxs)("div",{className:"grid gap-2 lg:col-span-2",children:[(0,s.jsx)(i.JU,{htmlFor:"".concat(e.key,"-").concat(t.key,"-label"),children:"Label"}),(0,s.jsx)(i.pd,{id:"".concat(e.key,"-").concat(t.key,"-label"),value:t.label,onChange:r=>R(e.key,t.key,{label:r.target.value})})]}),(0,s.jsxs)("div",{className:"grid gap-2 lg:col-span-1",children:[(0,s.jsx)(i.JU,{htmlFor:"".concat(e.key,"-").concat(t.key,"-type"),children:"Type"}),(0,s.jsxs)("select",{id:"".concat(e.key,"-").concat(t.key,"-type"),className:"w-full rounded-md border border-[color:var(--border)] bg-[var(--surface)] px-3 py-2 text-sm text-[color:var(--foreground)] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--color-primary-600)]",value:t.type,onChange:r=>R(e.key,t.key,{type:r.target.value}),children:[(0,s.jsx)("option",{value:"slider",children:"Slider (1–10)"}),(0,s.jsx)("option",{value:"select",children:"Dropdown"})]})]}),(0,s.jsx)("div",{className:"flex items-end justify-end lg:col-span-1",children:(0,s.jsx)(i.$n,{type:"button",className:"border border-white/15 bg-white/5 text-white hover:bg-white/10",onClick:()=>{var r,s;return r=e.key,s=t.key,void A(r,{traits:w.categories.find(e=>e.key===r).traits.filter(e=>e.key!==s)})},children:"Remove"})})]}),"select"===t.type?(0,s.jsxs)("div",{className:"mt-3 grid gap-2",children:[(0,s.jsx)(i.JU,{htmlFor:"".concat(e.key,"-").concat(t.key,"-options"),children:'Options (comma-separated "value:label:score")'}),(0,s.jsx)(i.pd,{id:"".concat(e.key,"-").concat(t.key,"-options"),value:(null!=(r=t.options)?r:[]).map(e=>"".concat(e.value,":").concat(e.label,":").concat("number"==typeof e.score?e.score:"")).join(","),onChange:r=>{let s=r.target.value.split(",").map(e=>e.trim()).filter(Boolean).map(e=>{var t;let[r,s,a]=e.split(":");return{value:(null!=r?r:"").trim(),label:(null!=(t=null!=s?s:r)?t:"").trim(),score:a?Number(a):void 0}}).filter(e=>e.value&&e.label);R(e.key,t.key,{options:s})}})]}):null]},t.key)}),0===e.traits.length?(0,s.jsx)("div",{className:"text-sm text-[color:var(--muted)]",children:"No traits yet."}):null]})]},e.key))}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)(i.$n,{type:"button",onClick:k,disabled:d||!E,children:d?"Creating...":"Create evaluation form"})})]}),(0,s.jsxs)("div",{className:"mt-6 rounded-2xl border border-[color:var(--border)] bg-[var(--surface-soft)] p-4",children:[(0,s.jsx)("div",{className:"text-sm font-semibold text-[color:var(--foreground)]",children:"Existing forms"}),(0,s.jsxs)("div",{className:"mt-4 grid gap-4 lg:grid-cols-2",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(i.JU,{htmlFor:"filterSport",children:"Sport"}),(0,s.jsx)(i.pd,{id:"filterSport",value:x,onChange:e=>f(e.target.value),placeholder:"e.g. football"})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(i.JU,{htmlFor:"activeOnly",children:"Active only"}),(0,s.jsxs)("select",{id:"activeOnly",className:"w-full rounded-md border border-[color:var(--border)] bg-[var(--surface-soft)] px-3 py-2 text-sm text-[color:var(--foreground)] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--color-primary-600)]",value:g?"1":"0",onChange:e=>b("1"===e.target.value),children:[(0,s.jsx)("option",{value:"1",children:"Yes"}),(0,s.jsx)("option",{value:"0",children:"No"})]})]})]}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)(i.$n,{type:"button",onClick:C,disabled:t,children:t?"Loading...":"Apply filters"})}),(0,s.jsxs)("div",{className:"mt-5 grid gap-3",children:[v.map(e=>(0,s.jsx)("div",{className:"rounded-2xl border border-[color:var(--border)] bg-[var(--surface)] p-4",children:(0,s.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-semibold text-[color:var(--foreground)]",children:e.title}),(0,s.jsxs)("div",{className:"mt-1 text-sm text-[color:var(--muted)]",children:["sport: ",(0,s.jsx)("span",{className:"text-[color:var(--foreground)]",children:e.sport})," \xb7 version: ",e.version," \xb7"," ",e.isActive?(0,s.jsx)("span",{className:"text-emerald-300",children:"active"}):(0,s.jsx)("span",{children:"inactive"}),e.updatedAt?" \xb7 updated ".concat(new Date(e.updatedAt).toLocaleString()):""]})]}),(0,s.jsx)(i.$n,{type:"button",className:"border border-white/15 bg-white/5 text-white hover:bg-white/10",onClick:()=>P(e._id),children:"Delete"})]})},e._id)),0===v.length?(0,s.jsx)("p",{className:"text-sm text-[color:var(--muted)]",children:"No forms found."}):null]})]})]})}},716:(e,t,r)=>{"use strict";r.d(t,{AdminGuard:()=>i});var s=r(4568),a=r(3996);function i(e){return(0,s.jsx)(a.RoleGuard,{allowed:["admin"],children:e.children})}},973:(e,t,r)=>{"use strict";r.d(t,{AdminShowcases:()=>x});var s=r(4568),a=r(9664),i=r.n(a),n=r(7620),l=r(4542),o=r(2883),c=r(5979),d=r(6015),u=r(3200);let m=["basketball","football","volleyball","baseball","soccer","other"],h=["draft","published","archived"];function v(e){if(!e)return"";let t=new Date(e),r=e=>String(e).padStart(2,"0");return"".concat(t.getFullYear(),"-").concat(r(t.getMonth()+1),"-").concat(r(t.getDate()),"T").concat(r(t.getHours()),":").concat(r(t.getMinutes()))}function p(e){if(!e)return;let t=new Date(e);if(Number.isFinite(t.getTime()))return t.toISOString()}function x(){let[e,t]=(0,n.useState)(!1),[r,a]=(0,n.useState)(null),[x,f]=(0,n.useState)([]),[g,b]=(0,n.useState)(""),[j,y]=(0,n.useState)(""),[w,N]=(0,n.useState)(""),[S,E]=(0,n.useState)(""),[C,k]=(0,n.useState)(null),[P,A]=(0,n.useState)("create"),[R,F]=(0,n.useState)(""),[I,U]=(0,n.useState)(""),[D,T]=(0,n.useState)(""),[G,J]=(0,n.useState)("By registering for and participating in this GoEducate showcase event, you acknowledge and agree to the following:\n\nParticipation in athletic showcase events involves physical activity that may carry inherent risks, including but not limited to physical injury, illness, or other harm. You voluntarily choose to participate and assume full responsibility for any risks associated with attendance and participation.\n\nYou agree to release, waive, and hold harmless GoEducate, Inc., its officers, employees, representatives, and agents from any and all claims, liabilities, damages, or losses arising from or related to participation in this showcase, except as required by law.\n\nYou confirm that you are physically capable of participating and that you have not been advised otherwise by a medical professional. If the participant is a minor, you confirm that you are the parent or legal guardian and consent to the minor’s participation.\n\nYou acknowledge that this is a waiver placeholder and that a more detailed legal waiver may be required prior to or at the event.\n\nBy checking the box below, you confirm that you have read, understand, and agree to this waiver."),[_,q]=(0,n.useState)("v1"),[O,L]=(0,n.useState)("Refund Policy\n\nEffective Date: 12/22/2025\n\nThis Refund Policy governs all showcase registrations processed by GoEducate, Inc. (“GoEducate,” “we,” “us,” or “our”).\n\n1. General Policy\n\nAll showcase registration fees are non-refundable unless expressly stated otherwise in writing by GoEducate, Inc.\n\nBy completing registration and submitting payment, the registrant acknowledges and agrees that registration fees are earned upon receipt and are subject to the terms of this Refund Policy.\n\n2. Refund Requests\n\nRefund requests must be submitted in writing to GoEducate, Inc. no later than seven (7) calendar days prior to the scheduled start date of the showcase. Any approved refund may be subject to administrative and third-party payment processing fees.\n\nRefund approval is not guaranteed and is granted solely at the discretion of GoEducate, Inc.\n\n3. Non-Refundable Circumstances\n\nRefunds will not be issued for, including but not limited to:\n\n- Failure to attend the showcase for any reason\n- Late arrival, early departure, or partial participation\n- Personal scheduling conflicts or travel issues\n- Disqualification, ineligibility, or failure to meet participation requirements\n- Voluntary withdrawal from the event\n\n4. Medical Exception Requests\n\nRequests for refunds based on medical emergencies or injuries must be supported by verifiable documentation and will be reviewed on a case-by-case basis. Submission of documentation does not guarantee approval. All determinations are made at the sole discretion of GoEducate, Inc.\n\n5. Event Cancellation or Modification\n\nIf a showcase is canceled, postponed, or materially modified by GoEducate, Inc., registrants will be offered, at GoEducate’s discretion:\n\n- A full refund, or\n- A credit applicable to a future GoEducate showcase\n\nCredits are non-transferable and must be used within the timeframe specified at issuance.\n\n6. Transfers and Credits\n\nRegistration fees are non-transferable to another individual. Credits toward future events may be granted at GoEducate’s discretion and do not carry cash value.\n\n7. Chargebacks and Payment Disputes (Stripe-Aligned)\n\nBy registering, you agree to contact GoEducate, Inc. prior to initiating any payment dispute or chargeback.\n\nInitiating a chargeback without first contacting GoEducate may result in:\n\n- Immediate suspension or termination of your GoEducate account\n- Loss of access to GoEducate services\n\nGoEducate, Inc. reserves the right to submit evidence to payment processors, including but not limited to:\n\n- Proof of registration and payment confirmation\n- Acceptance of the waiver and refund policy\n- Event details, schedules, and communications\n- Attendance records or event availability\n\nChargebacks determined in GoEducate’s favor may result in permanent account restrictions.\n\n8. Policy Updates\n\nGoEducate, Inc. reserves the right to amend this Refund Policy at any time. Any updates will apply prospectively and will not affect registrations completed prior to the effective date of the revision.\n\nBy registering for a showcase, you acknowledge that you have read, understand, and agree to this Refund Policy."),[M,$]=(0,n.useState)("v1"),[B,V]=(0,n.useState)("Weather-Related Event Clause\n\nShowcase events are scheduled to take place rain or shine.\n\nWeather conditions, including but not limited to rain, heat, cold, or other natural conditions, do not constitute grounds for a refund unless the event is fully canceled by GoEducate, Inc.\n\nIf weather conditions require cancellation, postponement, or modification of an event, GoEducate, Inc. will determine the appropriate remedy, which may include a refund or credit toward a future event, as outlined in the Refund Policy."),[W,Y]=(0,n.useState)("v1"),[Z,z]=(0,n.useState)(["football"]),[Q,H]=(0,n.useState)(""),[X,K]=(0,n.useState)(""),[ee,et]=(0,n.useState)("America/New_York"),[er,es]=(0,n.useState)(""),[ea,ei]=(0,n.useState)(""),[en,el]=(0,n.useState)(""),[eo,ec]=(0,n.useState)(""),[ed,eu]=(0,n.useState)(""),[em,eh]=(0,n.useState)(""),[ev,ep]=(0,n.useState)("0"),[ex,ef]=(0,n.useState)(""),[eg,eb]=(0,n.useState)(""),[ej,ey]=(0,n.useState)(!1),[ew,eN]=(0,n.useState)(""),[eS,eE]=(0,n.useState)(""),[eC,ek]=(0,n.useState)("draft"),[eP,eA]=(0,n.useState)(""),[eR,eF]=(0,n.useState)(!1),[eI,eU]=(0,n.useState)(null),[eD,eT]=(0,n.useState)(void 0),eG=(0,n.useMemo)(()=>{let e=new URLSearchParams;return g&&e.set("status",g),j&&e.set("sport",j),w&&e.set("from",new Date(w).toISOString()),S&&e.set("to",new Date(S).toISOString()),e.toString()},[g,j,w,S]);async function eJ(){a(null),t(!0);try{var e;let t=(0,c.iD)(),r=(0,c._u)(t);if(!t)throw Error("Please login first.");if("admin"!==r)throw Error("Insufficient permissions.");let s=await (0,o.n)("/admin/showcases?".concat(eG),{token:t});f(null!=(e=s.results)?e:[])}catch(e){a(e instanceof Error?e.message:"Failed to load showcases")}finally{t(!1)}}function e_(){k(null),A("create"),F(""),U(""),T(""),J("By registering for and participating in this GoEducate showcase event, you acknowledge and agree to the following:\n\nParticipation in athletic showcase events involves physical activity that may carry inherent risks, including but not limited to physical injury, illness, or other harm. You voluntarily choose to participate and assume full responsibility for any risks associated with attendance and participation.\n\nYou agree to release, waive, and hold harmless GoEducate, Inc., its officers, employees, representatives, and agents from any and all claims, liabilities, damages, or losses arising from or related to participation in this showcase, except as required by law.\n\nYou confirm that you are physically capable of participating and that you have not been advised otherwise by a medical professional. If the participant is a minor, you confirm that you are the parent or legal guardian and consent to the minor’s participation.\n\nYou acknowledge that this is a waiver placeholder and that a more detailed legal waiver may be required prior to or at the event.\n\nBy checking the box below, you confirm that you have read, understand, and agree to this waiver."),q("v1"),L("Refund Policy (Attorney-Ready Version)\n\nEffective Date: [Insert Date]\n\nThis Refund Policy governs all showcase registrations processed by GoEducate, Inc. (“GoEducate,” “we,” “us,” or “our”).\n\n1. General Policy\n\nAll showcase registration fees are non-refundable unless expressly stated otherwise in writing by GoEducate, Inc.\n\nBy completing registration and submitting payment, the registrant acknowledges and agrees that registration fees are earned upon receipt and are subject to the terms of this Refund Policy.\n\n2. Refund Requests\n\nRefund requests must be submitted in writing to GoEducate, Inc. no later than seven (7) calendar days prior to the scheduled start date of the showcase. Any approved refund may be subject to administrative and third-party payment processing fees.\n\nRefund approval is not guaranteed and is granted solely at the discretion of GoEducate, Inc.\n\n3. Non-Refundable Circumstances\n\nRefunds will not be issued for, including but not limited to:\n\n- Failure to attend the showcase for any reason\n- Late arrival, early departure, or partial participation\n- Personal scheduling conflicts or travel issues\n- Disqualification, ineligibility, or failure to meet participation requirements\n- Voluntary withdrawal from the event\n\n4. Medical Exception Requests\n\nRequests for refunds based on medical emergencies or injuries must be supported by verifiable documentation and will be reviewed on a case-by-case basis. Submission of documentation does not guarantee approval. All determinations are made at the sole discretion of GoEducate, Inc.\n\n5. Event Cancellation or Modification\n\nIf a showcase is canceled, postponed, or materially modified by GoEducate, Inc., registrants will be offered, at GoEducate’s discretion:\n\n- A full refund, or\n- A credit applicable to a future GoEducate showcase\n\nCredits are non-transferable and must be used within the timeframe specified at issuance.\n\n6. Transfers and Credits\n\nRegistration fees are non-transferable to another individual. Credits toward future events may be granted at GoEducate’s discretion and do not carry cash value.\n\n7. Chargebacks and Payment Disputes (Stripe-Aligned)\n\nBy registering, you agree to contact GoEducate, Inc. prior to initiating any payment dispute or chargeback.\n\nInitiating a chargeback without first contacting GoEducate may result in:\n\n- Immediate suspension or termination of your GoEducate account\n- Loss of access to GoEducate services\n\nGoEducate, Inc. reserves the right to submit evidence to payment processors, including but not limited to:\n\n- Proof of registration and payment confirmation\n- Acceptance of the waiver and refund policy\n- Event details, schedules, and communications\n- Attendance records or event availability\n\nChargebacks determined in GoEducate’s favor may result in permanent account restrictions.\n\n8. Policy Updates\n\nGoEducate, Inc. reserves the right to amend this Refund Policy at any time. Any updates will apply prospectively and will not affect registrations completed prior to the effective date of the revision.\n\nBy registering for a showcase, you acknowledge that you have read, understand, and agree to this Refund Policy."),$("v1"),V("Weather-Related Event Clause (Standalone)\n\nShowcase events are scheduled to take place rain or shine.\n\nWeather conditions, including but not limited to rain, heat, cold, or other natural conditions, do not constitute grounds for a refund unless the event is fully canceled by GoEducate, Inc.\n\nIf weather conditions require cancellation, postponement, or modification of an event, GoEducate, Inc. will determine the appropriate remedy, which may include a refund or credit toward a future event, as outlined in the Refund Policy."),Y("v1"),z(["football"]),H(""),K(""),et("America/New_York"),es(""),ei(""),el(""),ec(""),eu(""),eh(""),ep("0"),ef(""),eb(""),ey(!1),eN(""),eE(""),ek("draft"),eA(""),eU(null),eT(void 0)}async function eq(){eU(null),eT(void 0),eF(!0);try{let e=(0,c.iD)(),t=(0,c._u)(e);if(!e)throw Error("Please login first.");if("admin"!==t)throw Error("Insufficient permissions.");let r={};if(R.trim()||(r.title=["Title is required."]),I.trim()||(r.slug=["Slug is required."]),Q||(r.startDateTime=["Start date/time is required."]),X||(r.endDateTime=["End date/time is required."]),er.trim()||(r.locationName=["Venue is required."]),ea.trim()||(r.addressLine1=["Address line 1 is required."]),eo.trim()||(r.city=["City is required."]),ed.trim()||(r.state=["State is required."]),Z.length||(r.sportCategories=["Select at least one sport."]),Object.keys(r).length>0)return void eT(r);let s=Math.round(100*Number(ev||"0")),a={title:R.trim(),slug:I.trim(),description:D,waiverText:G,waiverVersion:_.trim()||"v1",refundPolicy:O,refundPolicyVersion:M.trim()||"v1",weatherClause:B,weatherClauseVersion:W.trim()||"v1",sportCategories:Z,startDateTime:p(Q),endDateTime:p(X),timezone:ee.trim()||"America/New_York",locationName:er.trim(),addressLine1:ea.trim(),addressLine2:en.trim()||void 0,city:eo.trim(),state:ed.trim(),zip:em.trim()||void 0,costCents:Number.isFinite(s)?s:0,currency:"usd",capacity:ex.trim()?Number(ex):void 0,spotsRemaining:eg.trim()?Number(eg):void 0,registrationOpen:ej,registrationOpenAt:ew?p(ew):void 0,registrationCloseAt:eS?p(eS):void 0,status:eC,stripePriceId:eP.trim()||void 0};"create"===P?(await (0,o.n)("/admin/showcases",{method:"POST",token:e,body:JSON.stringify(a)}),e_(),await eJ()):C&&(await (0,o.n)("/admin/showcases/".concat(C.id),{method:"PUT",token:e,body:JSON.stringify(a)}),await eJ())}catch(r){var e;let t=(0,u._)(r);eU(null!=(e=t.formError)?e:"Failed to save showcase"),eT(t.fieldErrors)}finally{eF(!1)}}async function eO(e){if(confirm('Archive "'.concat(e.title,'"?'))){a(null);try{let t=(0,c.iD)(),r=(0,c._u)(t);if(!t)throw Error("Please login first.");if("admin"!==r)throw Error("Insufficient permissions.");await (0,o.n)("/admin/showcases/".concat(e.id),{method:"DELETE",token:t}),await eJ()}catch(e){a(e instanceof Error?e.message:"Failed to archive")}}}return(0,n.useEffect)(()=>{eJ()},[eG]),(0,s.jsxs)("div",{className:"grid gap-6",children:[(0,s.jsxs)(l.Zp,{children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",children:"Showcases"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-white/80",children:"Create and manage the showcases catalog."})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(l.$n,{type:"button",className:"border border-white/15 bg-white/5 text-white hover:bg-white/10",onClick:e_,children:"New"}),(0,s.jsx)(l.$n,{type:"button",onClick:eJ,disabled:e,children:e?"Refreshing...":"Refresh"})]})]}),r?(0,s.jsx)("p",{className:"mt-4 text-sm text-red-300",children:r}):null,(0,s.jsxs)("div",{className:"mt-6 grid gap-4 sm:grid-cols-4",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(l.JU,{htmlFor:"showcaseStatusFilter",children:"Status"}),(0,s.jsxs)("select",{id:"showcaseStatusFilter",className:"w-full rounded-md border border-[color:var(--border)] bg-[var(--surface-soft)] px-3 py-2 text-sm text-[color:var(--foreground)] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--color-primary-600)]",value:g,onChange:e=>b(e.target.value),children:[(0,s.jsx)("option",{value:"",children:"All"}),h.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(l.JU,{htmlFor:"showcaseSportFilter",children:"Sport"}),(0,s.jsxs)("select",{id:"showcaseSportFilter",className:"w-full rounded-md border border-[color:var(--border)] bg-[var(--surface-soft)] px-3 py-2 text-sm text-[color:var(--foreground)] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--color-primary-600)]",value:j,onChange:e=>y(e.target.value),children:[(0,s.jsx)("option",{value:"",children:"All"}),m.map(e=>(0,s.jsx)("option",{value:e,children:e},e))]})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(l.JU,{htmlFor:"showcaseFrom",children:"From"}),(0,s.jsx)(l.pd,{id:"showcaseFrom",type:"date",value:w,onChange:e=>N(e.target.value)})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(l.JU,{htmlFor:"showcaseTo",children:"To"}),(0,s.jsx)(l.pd,{id:"showcaseTo",type:"date",value:S,onChange:e=>E(e.target.value)})]})]}),(0,s.jsx)("div",{className:"mt-6 overflow-x-auto rounded-2xl border border-[color:var(--border)] bg-[var(--surface)]",children:(0,s.jsxs)("table",{className:"w-full min-w-[920px] text-left text-sm",children:[(0,s.jsx)("thead",{className:"border-b border-[color:var(--border)] text-[color:var(--muted-2)]",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-3 font-medium",children:"Title"}),(0,s.jsx)("th",{className:"px-4 py-3 font-medium",children:"Start"}),(0,s.jsx)("th",{className:"px-4 py-3 font-medium",children:"Location"}),(0,s.jsx)("th",{className:"px-4 py-3 font-medium",children:"Cost"}),(0,s.jsx)("th",{className:"px-4 py-3 font-medium",children:"Status"}),(0,s.jsx)("th",{className:"px-4 py-3 font-medium",children:"Reg open"}),(0,s.jsx)("th",{className:"px-4 py-3 font-medium",children:"Cap/Remaining"}),(0,s.jsx)("th",{className:"px-4 py-3 font-medium",children:"Actions"})]})}),(0,s.jsxs)("tbody",{children:[x.map(e=>{var t;return(0,s.jsxs)("tr",{className:"border-b border-[color:var(--border)] last:border-0",children:[(0,s.jsxs)("td",{className:"px-4 py-3 text-[color:var(--foreground)]",children:[(0,s.jsx)("div",{className:"font-semibold",children:e.title}),(0,s.jsx)("div",{className:"text-xs text-[color:var(--muted-2)]",children:e.slug})]}),(0,s.jsx)("td",{className:"px-4 py-3 text-[color:var(--muted)]",children:e.startDateTime?new Date(e.startDateTime).toLocaleString():"—"}),(0,s.jsxs)("td",{className:"px-4 py-3 text-[color:var(--muted)]",children:[e.city,", ",e.state]}),(0,s.jsx)("td",{className:"px-4 py-3 text-[color:var(--muted)]",children:function(e,t){let r=(null!=e?e:0)/100;try{return new Intl.NumberFormat(void 0,{style:"currency",currency:(t||"usd").toUpperCase()}).format(r)}catch(e){return"$".concat(r.toFixed(2))}}(e.costCents,e.currency)}),(0,s.jsx)("td",{className:"px-4 py-3 text-[color:var(--muted)]",children:null!=(t=e.status)?t:"—"}),(0,s.jsx)("td",{className:"px-4 py-3 text-[color:var(--muted)]",children:e.registrationOpen?"Yes":"No"}),(0,s.jsxs)("td",{className:"px-4 py-3 text-[color:var(--muted)]",children:["number"==typeof e.capacity?e.capacity:"—","/","number"==typeof e.spotsRemaining?e.spotsRemaining:"—"]}),(0,s.jsx)("td",{className:"px-4 py-3",children:(0,s.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,s.jsx)(l.$n,{type:"button",className:"border border-white/15 bg-white/5 text-white hover:bg-white/10",onClick:()=>{var t,r,s,a,i,n,l,o,c,d,u,m,h,p,x,f,g,b,j,y;A("edit"),k(e),F(null!=(r=e.title)?r:""),U(null!=(s=e.slug)?s:""),T(null!=(a=e.description)?a:""),J(null!=(i=e.waiverText)?i:"By registering for and participating in this GoEducate showcase event, you acknowledge and agree to the following:\n\nParticipation in athletic showcase events involves physical activity that may carry inherent risks, including but not limited to physical injury, illness, or other harm. You voluntarily choose to participate and assume full responsibility for any risks associated with attendance and participation.\n\nYou agree to release, waive, and hold harmless GoEducate, Inc., its officers, employees, representatives, and agents from any and all claims, liabilities, damages, or losses arising from or related to participation in this showcase, except as required by law.\n\nYou confirm that you are physically capable of participating and that you have not been advised otherwise by a medical professional. If the participant is a minor, you confirm that you are the parent or legal guardian and consent to the minor’s participation.\n\nYou acknowledge that this is a waiver placeholder and that a more detailed legal waiver may be required prior to or at the event.\n\nBy checking the box below, you confirm that you have read, understand, and agree to this waiver."),q(String(null!=(n=e.waiverVersion)?n:"v1")),L(null!=(l=e.refundPolicy)?l:"Refund Policy (Attorney-Ready Version)\n\nEffective Date: [Insert Date]\n\nThis Refund Policy governs all showcase registrations processed by GoEducate, Inc. (“GoEducate,” “we,” “us,” or “our”).\n\n1. General Policy\n\nAll showcase registration fees are non-refundable unless expressly stated otherwise in writing by GoEducate, Inc.\n\nBy completing registration and submitting payment, the registrant acknowledges and agrees that registration fees are earned upon receipt and are subject to the terms of this Refund Policy.\n\n2. Refund Requests\n\nRefund requests must be submitted in writing to GoEducate, Inc. no later than seven (7) calendar days prior to the scheduled start date of the showcase. Any approved refund may be subject to administrative and third-party payment processing fees.\n\nRefund approval is not guaranteed and is granted solely at the discretion of GoEducate, Inc.\n\n3. Non-Refundable Circumstances\n\nRefunds will not be issued for, including but not limited to:\n\n- Failure to attend the showcase for any reason\n- Late arrival, early departure, or partial participation\n- Personal scheduling conflicts or travel issues\n- Disqualification, ineligibility, or failure to meet participation requirements\n- Voluntary withdrawal from the event\n\n4. Medical Exception Requests\n\nRequests for refunds based on medical emergencies or injuries must be supported by verifiable documentation and will be reviewed on a case-by-case basis. Submission of documentation does not guarantee approval. All determinations are made at the sole discretion of GoEducate, Inc.\n\n5. Event Cancellation or Modification\n\nIf a showcase is canceled, postponed, or materially modified by GoEducate, Inc., registrants will be offered, at GoEducate’s discretion:\n\n- A full refund, or\n- A credit applicable to a future GoEducate showcase\n\nCredits are non-transferable and must be used within the timeframe specified at issuance.\n\n6. Transfers and Credits\n\nRegistration fees are non-transferable to another individual. Credits toward future events may be granted at GoEducate’s discretion and do not carry cash value.\n\n7. Chargebacks and Payment Disputes (Stripe-Aligned)\n\nBy registering, you agree to contact GoEducate, Inc. prior to initiating any payment dispute or chargeback.\n\nInitiating a chargeback without first contacting GoEducate may result in:\n\n- Immediate suspension or termination of your GoEducate account\n- Loss of access to GoEducate services\n\nGoEducate, Inc. reserves the right to submit evidence to payment processors, including but not limited to:\n\n- Proof of registration and payment confirmation\n- Acceptance of the waiver and refund policy\n- Event details, schedules, and communications\n- Attendance records or event availability\n\nChargebacks determined in GoEducate’s favor may result in permanent account restrictions.\n\n8. Policy Updates\n\nGoEducate, Inc. reserves the right to amend this Refund Policy at any time. Any updates will apply prospectively and will not affect registrations completed prior to the effective date of the revision.\n\nBy registering for a showcase, you acknowledge that you have read, understand, and agree to this Refund Policy."),$(String(null!=(o=e.refundPolicyVersion)?o:"v1")),V(null!=(c=e.weatherClause)?c:"Weather-Related Event Clause (Standalone)\n\nShowcase events are scheduled to take place rain or shine.\n\nWeather conditions, including but not limited to rain, heat, cold, or other natural conditions, do not constitute grounds for a refund unless the event is fully canceled by GoEducate, Inc.\n\nIf weather conditions require cancellation, postponement, or modification of an event, GoEducate, Inc. will determine the appropriate remedy, which may include a refund or credit toward a future event, as outlined in the Refund Policy."),Y(String(null!=(d=e.weatherClauseVersion)?d:"v1")),z((null==(t=e.sportCategories)?void 0:t.length)?e.sportCategories:["football"]),H(v(e.startDateTime)),K(v(e.endDateTime)),et(null!=(u=e.timezone)?u:"America/New_York"),es(null!=(m=e.locationName)?m:""),ei(null!=(h=e.addressLine1)?h:""),el(null!=(p=e.addressLine2)?p:""),ec(null!=(x=e.city)?x:""),eu(null!=(f=e.state)?f:""),eh(null!=(g=e.zip)?g:""),ep(String(((null!=(b=e.costCents)?b:0)/100).toFixed(2))),ef("number"==typeof e.capacity?String(e.capacity):""),eb("number"==typeof e.spotsRemaining?String(e.spotsRemaining):""),ey(!!e.registrationOpen),eN(v(e.registrationOpenAt)),eE(v(e.registrationCloseAt)),ek(null!=(j=e.status)?j:"draft"),eA(null!=(y=e.stripePriceId)?y:""),eU(null),eT(void 0)},children:"Edit"}),(0,s.jsx)(i(),{className:"rounded-md bg-indigo-600 px-4 py-2 text-sm font-medium text-white hover:bg-indigo-500",href:"/showcases/".concat(encodeURIComponent(e.slug||e.id)),children:"Preview"}),(0,s.jsx)(l.$n,{type:"button",className:"border border-red-400/30 bg-red-500/10 text-red-200 hover:bg-red-500/20",onClick:()=>eO(e),children:"Archive"})]})})]},e.id)}),0===x.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{className:"px-4 py-6 text-[color:var(--muted)]",colSpan:8,children:"No showcases found."})}):null]})]})})]}),(0,s.jsxs)(l.Zp,{children:[(0,s.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h3",{className:"text-lg font-semibold",children:"create"===P?"Create showcase":"Edit showcase"}),(0,s.jsxs)("p",{className:"mt-1 text-sm text-white/80",children:["Option 1 Stripe linking: paste the ",(0,s.jsx)("span",{className:"font-semibold text-white",children:"stripePriceId"})," to enable registration."]})]}),C?(0,s.jsx)("div",{className:"text-sm",children:(0,s.jsx)(i(),{href:"/showcases/".concat(encodeURIComponent(C.slug||C.id)),className:"text-indigo-300 hover:text-indigo-200 hover:underline",children:"View public page"})}):null]}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)(d.N,{formError:null!=eI?eI:void 0,fieldErrors:eD})}),(0,s.jsxs)("div",{className:"mt-6 grid gap-4 sm:grid-cols-2",children:[(0,s.jsxs)("div",{className:"grid gap-2 sm:col-span-2",children:[(0,s.jsx)(l.JU,{htmlFor:"showcaseTitle",children:"Title"}),(0,s.jsx)(l.pd,{id:"showcaseTitle",value:R,onChange:e=>{let t=e.target.value;F(t),"create"===P&&U(I||t.toLowerCase().trim().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,"").slice(0,80))}}),(0,s.jsx)(d.b,{name:"title",fieldErrors:eD})]}),(0,s.jsxs)("div",{className:"grid gap-2 sm:col-span-2",children:[(0,s.jsx)(l.JU,{htmlFor:"showcaseSlug",children:"Slug"}),(0,s.jsx)(l.pd,{id:"showcaseSlug",value:I,onChange:e=>U(e.target.value),placeholder:"summer-showcase-2026"}),(0,s.jsx)(d.b,{name:"slug",fieldErrors:eD})]}),(0,s.jsxs)("div",{className:"grid gap-2 sm:col-span-2",children:[(0,s.jsx)(l.JU,{htmlFor:"showcaseDesc",children:"Description"}),(0,s.jsx)("textarea",{id:"showcaseDesc",value:D,onChange:e=>T(e.target.value),rows:6,className:"w-full rounded-md border border-[color:var(--border)] bg-[var(--surface-soft)] px-3 py-2 text-sm text-[color:var(--foreground)] placeholder:text-[color:var(--muted-3)] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--color-primary-600)]",placeholder:"Full description, who should attend, what to bring, refund policy..."})]}),(0,s.jsxs)("div",{className:"grid gap-2 sm:col-span-2",children:[(0,s.jsx)(l.JU,{htmlFor:"showcaseWaiverText",children:"Waiver text"}),(0,s.jsx)("textarea",{id:"showcaseWaiverText",value:G,onChange:e=>J(e.target.value),rows:8,className:"w-full rounded-md border border-[color:var(--border)] bg-[var(--surface-soft)] px-3 py-2 text-sm text-[color:var(--foreground)] placeholder:text-[color:var(--muted-3)] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--color-primary-600)]",placeholder:"Paste the waiver text here."})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(l.JU,{htmlFor:"showcaseWaiverVersion",children:"Waiver version"}),(0,s.jsx)(l.pd,{id:"showcaseWaiverVersion",value:_,onChange:e=>q(e.target.value),placeholder:"v1"})]}),(0,s.jsxs)("div",{className:"grid gap-2 sm:col-span-2",children:[(0,s.jsx)(l.JU,{htmlFor:"showcaseRefundPolicy",children:"Refund policy"}),(0,s.jsx)("textarea",{id:"showcaseRefundPolicy",value:O,onChange:e=>L(e.target.value),rows:10,className:"w-full rounded-md border border-[color:var(--border)] bg-[var(--surface-soft)] px-3 py-2 text-sm text-[color:var(--foreground)] placeholder:text-[color:var(--muted-3)] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--color-primary-600)]",placeholder:"Paste the full Refund Policy text here."})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(l.JU,{htmlFor:"showcaseRefundPolicyVersion",children:"Refund policy version"}),(0,s.jsx)(l.pd,{id:"showcaseRefundPolicyVersion",value:M,onChange:e=>$(e.target.value),placeholder:"v1"})]}),(0,s.jsxs)("div",{className:"grid gap-2 sm:col-span-2",children:[(0,s.jsx)(l.JU,{htmlFor:"showcaseWeatherClause",children:"Weather clause"}),(0,s.jsx)("textarea",{id:"showcaseWeatherClause",value:B,onChange:e=>V(e.target.value),rows:6,className:"w-full rounded-md border border-[color:var(--border)] bg-[var(--surface-soft)] px-3 py-2 text-sm text-[color:var(--foreground)] placeholder:text-[color:var(--muted-3)] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--color-primary-600)]",placeholder:"Paste the Weather Clause text here."})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(l.JU,{htmlFor:"showcaseWeatherClauseVersion",children:"Weather clause version"}),(0,s.jsx)(l.pd,{id:"showcaseWeatherClauseVersion",value:W,onChange:e=>Y(e.target.value),placeholder:"v1"})]}),(0,s.jsxs)("div",{className:"grid gap-2 sm:col-span-2",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-[color:var(--muted)]",children:"Sport categories"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-3",children:m.map(e=>{let t=Z.includes(e);return(0,s.jsxs)("label",{className:"inline-flex items-center gap-2 text-sm text-white/80",children:[(0,s.jsx)("input",{type:"checkbox",checked:t,onChange:()=>{z(r=>t?r.filter(t=>t!==e):[...r,e])}}),e]},e)})}),(0,s.jsx)(d.b,{name:"sportCategories",fieldErrors:eD})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(l.JU,{htmlFor:"showcaseStart",children:"Start"}),(0,s.jsx)(l.pd,{id:"showcaseStart",type:"datetime-local",value:Q,onChange:e=>H(e.target.value)}),(0,s.jsx)(d.b,{name:"startDateTime",fieldErrors:eD})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(l.JU,{htmlFor:"showcaseEnd",children:"End"}),(0,s.jsx)(l.pd,{id:"showcaseEnd",type:"datetime-local",value:X,onChange:e=>K(e.target.value)}),(0,s.jsx)(d.b,{name:"endDateTime",fieldErrors:eD})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(l.JU,{htmlFor:"showcaseTz",children:"Timezone"}),(0,s.jsx)(l.pd,{id:"showcaseTz",value:ee,onChange:e=>et(e.target.value)})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(l.JU,{htmlFor:"showcaseCost",children:"Cost (USD)"}),(0,s.jsx)(l.pd,{id:"showcaseCost",value:ev,onChange:e=>ep(e.target.value),placeholder:"99.00"})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(l.JU,{htmlFor:"showcaseCapacity",children:"Capacity (optional)"}),(0,s.jsx)(l.pd,{id:"showcaseCapacity",value:ex,onChange:e=>ef(e.target.value),placeholder:"200"})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(l.JU,{htmlFor:"showcaseRemaining",children:"Spots remaining (optional)"}),(0,s.jsx)(l.pd,{id:"showcaseRemaining",value:eg,onChange:e=>eb(e.target.value),placeholder:"200"})]}),(0,s.jsxs)("div",{className:"grid gap-2 sm:col-span-2",children:[(0,s.jsx)(l.JU,{htmlFor:"showcaseVenue",children:"Venue name"}),(0,s.jsx)(l.pd,{id:"showcaseVenue",value:er,onChange:e=>es(e.target.value)}),(0,s.jsx)(d.b,{name:"locationName",fieldErrors:eD})]}),(0,s.jsxs)("div",{className:"grid gap-2 sm:col-span-2",children:[(0,s.jsx)(l.JU,{htmlFor:"showcaseAddr1",children:"Address line 1"}),(0,s.jsx)(l.pd,{id:"showcaseAddr1",value:ea,onChange:e=>ei(e.target.value)}),(0,s.jsx)(d.b,{name:"addressLine1",fieldErrors:eD})]}),(0,s.jsxs)("div",{className:"grid gap-2 sm:col-span-2",children:[(0,s.jsx)(l.JU,{htmlFor:"showcaseAddr2",children:"Address line 2"}),(0,s.jsx)(l.pd,{id:"showcaseAddr2",value:en,onChange:e=>el(e.target.value)})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(l.JU,{htmlFor:"showcaseCity",children:"City"}),(0,s.jsx)(l.pd,{id:"showcaseCity",value:eo,onChange:e=>ec(e.target.value)}),(0,s.jsx)(d.b,{name:"city",fieldErrors:eD})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(l.JU,{htmlFor:"showcaseState",children:"State"}),(0,s.jsx)(l.pd,{id:"showcaseState",value:ed,onChange:e=>eu(e.target.value)}),(0,s.jsx)(d.b,{name:"state",fieldErrors:eD})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(l.JU,{htmlFor:"showcaseZip",children:"Zip"}),(0,s.jsx)(l.pd,{id:"showcaseZip",value:em,onChange:e=>eh(e.target.value)})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)("div",{className:"text-sm font-medium text-[color:var(--muted)]",children:"Registration open"}),(0,s.jsxs)("label",{className:"inline-flex items-center gap-2 text-sm text-white/80",children:[(0,s.jsx)("input",{type:"checkbox",checked:ej,onChange:e=>ey(e.target.checked)})," Open"]})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(l.JU,{htmlFor:"showcaseStatus",children:"Status"}),(0,s.jsx)("select",{id:"showcaseStatus",className:"w-full rounded-md border border-[color:var(--border)] bg-[var(--surface-soft)] px-3 py-2 text-sm text-[color:var(--foreground)] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--color-primary-600)]",value:eC,onChange:e=>ek(e.target.value),children:h.map(e=>(0,s.jsx)("option",{value:e,children:e},e))})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(l.JU,{htmlFor:"showcaseOpenAt",children:"Open at (optional)"}),(0,s.jsx)(l.pd,{id:"showcaseOpenAt",type:"datetime-local",value:ew,onChange:e=>eN(e.target.value)})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(l.JU,{htmlFor:"showcaseCloseAt",children:"Close at (optional)"}),(0,s.jsx)(l.pd,{id:"showcaseCloseAt",type:"datetime-local",value:eS,onChange:e=>eE(e.target.value)})]}),(0,s.jsxs)("div",{className:"grid gap-2 sm:col-span-2",children:[(0,s.jsx)(l.JU,{htmlFor:"showcaseStripePriceId",children:"Stripe Price ID (required to register)"}),(0,s.jsx)(l.pd,{id:"showcaseStripePriceId",value:eP,onChange:e=>eA(e.target.value),placeholder:"price_..."})]})]}),(0,s.jsxs)("div",{className:"mt-6 flex flex-wrap items-center gap-3",children:[(0,s.jsx)(l.$n,{type:"button",onClick:eq,disabled:eR,children:eR?"Saving...":"create"===P?"Create showcase":"Save changes"}),(0,s.jsx)(l.$n,{type:"button",className:"border border-white/15 bg-white/5 text-white hover:bg-white/10",onClick:()=>e_(),children:"Reset"})]})]})]})}},1640:(e,t,r)=>{"use strict";r.d(t,{AdminPlayerMap:()=>m});var s=r(4568),a=r(7620),i=r(2883),n=r(5979),l=r(4542),o=r(2261),c=r(2955),d=r(786),u=r(3431);function m(){var e;let[t,r]=(0,a.useState)(!1),[m,h]=(0,a.useState)(null),[v,p]=(0,a.useState)(null),[x,f]=(0,a.useState)(null),[g,b]=(0,a.useState)(null),j=(0,a.useRef)(null);async function y(){h(null),r(!0);try{let e=(0,n.iD)(),t=(0,n._u)(e);if(!e)throw Error("Please login first.");if("admin"!==t)throw Error("Insufficient permissions.");let r=await (0,i.n)("/admin/players/by-state",{token:e});p(r)}catch(e){h(e instanceof Error?e.message:"Failed to load player locations")}finally{r(!1)}}(0,a.useEffect)(()=>{y()},[]);let w=(0,a.useMemo)(()=>{var e;let t=new Map;for(let r of null!=(e=null==v?void 0:v.byState)?e:[])t.set(r.name,r);return t},[v]),N=(0,a.useMemo)(()=>{var e;return Math.max(0,...(null!=(e=null==v?void 0:v.byState)?e:[]).map(e=>e.count))},[v]),S=(0,a.useMemo)(()=>{var e;return(null!=(e=null==v?void 0:v.byState)?e:[]).reduce((e,t)=>e+t.count,0)},[v]),E=(0,a.useMemo)(()=>(0,d.A)(u,u.objects.states).features,[]),C=(0,a.useMemo)(()=>{let e=(0,o.A)();return e.fitSize([975,610],{type:"FeatureCollection",features:E}),{width:975,height:610,path:(0,c.A)(e)}},[E]),k=(null!=(e=null==v?void 0:v.byState)?e:[]).slice(0,8);return(0,s.jsxs)(l.Zp,{children:[(0,s.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",children:"Player map"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-[color:var(--muted)]",children:"Where players are located across the U.S. (by state)."})]}),(0,s.jsx)(l.$n,{type:"button",onClick:y,disabled:t,children:t?"Refreshing...":"Refresh"})]}),m?(0,s.jsx)("p",{className:"mt-4 text-sm text-red-300",children:m}):null,(0,s.jsxs)("div",{className:"mt-6 grid gap-4 lg:grid-cols-[1.6fr_1fr]",children:[(0,s.jsxs)("div",{ref:j,className:"relative overflow-hidden rounded-2xl border border-[color:var(--border)] bg-[var(--surface-soft)] p-3",onMouseLeave:function(){b(null)},children:[(0,s.jsx)("svg",{viewBox:"0 0 ".concat(C.width," ").concat(C.height),className:"h-auto w-full",children:(0,s.jsx)("g",{children:E.map(e=>{var t,r,a,i,n;let l=String(null!=(r=null==(t=e.properties)?void 0:t.name)?r:""),o=w.get(l),c=null!=(a=null==o?void 0:o.count)?a:0,d=function(e,t){if(!t||t<=0||e<=0)return"rgba(255,255,255,0.06)";let r=Math.max(0,Math.min(1,e/t));return"rgba(79,70,229,".concat((.18+.72*r).toFixed(3),")")}(c,N),u=(null==x?void 0:x.name)===l;return(0,s.jsx)("path",{d:null!=(i=C.path(e))?i:"",fill:d,stroke:"rgba(255,255,255,0.18)",strokeWidth:u?1.5:.75,className:"cursor-pointer transition-opacity hover:opacity-95",onMouseMove:e=>(function(e,t){var r;let s=null==(r=j.current)?void 0:r.getBoundingClientRect();s&&b({x:e.clientX-s.left+12,y:e.clientY-s.top+12,text:t})})(e,"".concat(l,": ").concat(c)),onClick:()=>f(null!=o?o:{code:"",name:l,count:c})},String(null!=(n=e.id)?n:l))})})}),g?(0,s.jsx)("div",{className:"pointer-events-none absolute z-10 rounded-lg border border-white/10 bg-black/80 px-2 py-1 text-xs text-white shadow",style:{left:g.x,top:g.y},children:g.text}):null]}),(0,s.jsxs)("div",{className:"grid gap-4",children:[(0,s.jsxs)("div",{className:"rounded-2xl border border-[color:var(--border)] bg-[var(--surface)] p-4",children:[(0,s.jsx)("div",{className:"text-xs uppercase tracking-wide text-[color:var(--muted-2)]",children:"Coverage"}),(0,s.jsxs)("div",{className:"mt-2 text-sm text-[color:var(--muted)]",children:["Known state: ",(0,s.jsx)("span",{className:"text-[color:var(--foreground)] font-semibold",children:S}),"number"==typeof(null==v?void 0:v.unknownCount)?(0,s.jsxs)(s.Fragment,{children:[" ","\xb7 Unknown/invalid: ",(0,s.jsx)("span",{className:"text-[color:var(--foreground)] font-semibold",children:v.unknownCount})]}):null]}),(0,s.jsx)("div",{className:"mt-3 text-xs text-[color:var(--muted-2)]",children:"Darker indigo = more players in that state."}),(0,s.jsx)("div",{className:"mt-3 h-2 w-full overflow-hidden rounded-full bg-white/5",children:(0,s.jsx)("div",{className:"h-full w-full bg-gradient-to-r from-white/5 via-[rgba(79,70,229,0.55)] to-[rgba(79,70,229,0.95)]"})})]}),(0,s.jsxs)("div",{className:"rounded-2xl border border-[color:var(--border)] bg-[var(--surface)] p-4",children:[(0,s.jsx)("div",{className:"text-sm font-semibold text-[color:var(--foreground)]",children:"Top states"}),(0,s.jsxs)("div",{className:"mt-3 grid gap-1 text-sm text-[color:var(--muted)]",children:[k.map(e=>(0,s.jsxs)("button",{type:"button",className:"flex items-center justify-between gap-3 rounded-md px-2 py-1 text-left hover:bg-white/5",onClick:()=>f(e),children:[(0,s.jsx)("div",{className:"text-[color:var(--foreground)]",children:e.name}),(0,s.jsx)("div",{children:e.count})]},e.code)),0===k.length?(0,s.jsx)("div",{children:"—"}):null]})]}),(0,s.jsxs)("div",{className:"rounded-2xl border border-[color:var(--border)] bg-[var(--surface)] p-4",children:[(0,s.jsx)("div",{className:"text-sm font-semibold text-[color:var(--foreground)]",children:"Selected"}),(0,s.jsx)("div",{className:"mt-2 text-sm text-[color:var(--muted)]",children:x?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"text-[color:var(--foreground)] font-semibold",children:x.name}),(0,s.jsxs)("div",{className:"mt-1",children:["Players: ",x.count]})]}):(0,s.jsx)("div",{children:"Click a state to pin details."})})]})]})]})]})}},1965:(e,t,r)=>{"use strict";r.d(t,{AdminUserManager:()=>u});var s=r(4568),a=r(7620),i=r(8648),n=r(6015),l=r(4542),o=r(2883),c=r(5979),d=r(3200);function u(){let e=(0,i.S)(),[t,r]=(0,a.useState)(!1),[u,m]=(0,a.useState)(null),[h,v]=(0,a.useState)([]),[p,x]=(0,a.useState)(""),[f,g]=(0,a.useState)(""),[b,j]=(0,a.useState)(""),[y,w]=(0,a.useState)("coach"),[N,S]=(0,a.useState)(null),[E,C]=(0,a.useState)(null),[k,P]=(0,a.useState)(void 0),[A,R]=(0,a.useState)(!1),F=(0,a.useMemo)(()=>{let e=new URLSearchParams;return p&&e.set("role",p),f.trim()&&e.set("q",f.trim()),e.set("limit","100"),e.toString()},[p,f]);async function I(){m(null),r(!0);try{let e=(0,c.iD)(),t=(0,c._u)(e);if(!e)throw Error("Please login first.");if("admin"!==t)throw Error("Insufficient permissions.");let r=await (0,o.n)("/admin/users?".concat(F),{token:e});v(r.results)}catch(t){var e;m(null!=(e=(0,d._)(t).formError)?e:"Failed to load users")}finally{r(!1)}}async function U(t){if(await e({title:"Delete ".concat(t.role," user?"),message:"Delete ".concat(t.email,"? This cannot be undone."),confirmText:"Delete",cancelText:"Cancel",destructive:!0})){m(null);try{let e=(0,c.iD)(),r=(0,c._u)(e);if(!e)throw Error("Please login first.");if("admin"!==r)throw Error("Insufficient permissions.");await (0,o.n)("/admin/users/".concat(t.id),{method:"DELETE",token:e}),await I()}catch(e){var r;m(null!=(r=(0,d._)(e).formError)?r:"Failed to delete user")}}}async function D(){S(null),C(null),P(void 0),R(!0);try{let e={};if(b.trim()||(e.inviteEmail=["Email is required."]),Object.keys(e).length>0)return void P(e);let t=(0,c.iD)(),r=(0,c._u)(t);if(!t)throw Error("Please login first.");if("admin"!==r)throw Error("Insufficient permissions.");let s=await (0,o.n)("/admin/invites",{method:"POST",token:t,body:JSON.stringify({email:b,role:y})}),a="".concat(window.location.origin,"/invite");s.emailSent?S("Invite emailed to ".concat(s.invite.email," (").concat(s.invite.role,"). Link: ").concat(a," (code also shown below). Code: ").concat(s.invite.token)):S("Invite created for ".concat(s.invite.email," (").concat(s.invite.role,"). Email not sent").concat(s.emailError?" (".concat(s.emailError,")"):"",". Code: ").concat(s.invite.token,". Link: ").concat(a)),j("")}catch(r){var e;let t=(0,d._)(r);C(null!=(e=t.formError)?e:"Failed to create invite"),P(t.fieldErrors)}finally{R(!1)}}return(0,a.useEffect)(()=>{I()},[F]),(0,s.jsxs)("div",{className:"grid gap-6",children:[(0,s.jsxs)(l.Zp,{children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",children:"User management"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-white/80",children:"Search users, delete users, and generate invite codes."})]}),(0,s.jsx)(l.$n,{type:"button",onClick:I,disabled:t,children:t?"Refreshing...":"Refresh"})]}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)(n.N,{formError:null!=u?u:void 0})}),(0,s.jsxs)("div",{className:"mt-6 grid gap-4 sm:grid-cols-3",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(l.JU,{htmlFor:"role",children:"Role"}),(0,s.jsxs)("select",{id:"role",className:"w-full rounded-md border border-[color:var(--border)] bg-[var(--surface-soft)] px-3 py-2 text-sm text-[color:var(--foreground)] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--color-primary-600)]",value:p,onChange:e=>x(e.target.value),children:[(0,s.jsx)("option",{value:"",children:"All"}),(0,s.jsx)("option",{value:"player",children:"Player"}),(0,s.jsx)("option",{value:"coach",children:"Coach"}),(0,s.jsx)("option",{value:"evaluator",children:"Evaluator"}),(0,s.jsx)("option",{value:"admin",children:"Admin"})]})]}),(0,s.jsxs)("div",{className:"grid gap-2 sm:col-span-2",children:[(0,s.jsx)(l.JU,{htmlFor:"q",children:"Search (email)"}),(0,s.jsx)(l.pd,{id:"q",value:f,onChange:e=>g(e.target.value),placeholder:"name@school.org"})]})]}),(0,s.jsx)("div",{className:"mt-6 overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full text-left text-sm",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b border-[color:var(--border)] text-[color:var(--color-text-muted)]",children:[(0,s.jsx)("th",{className:"py-2 pr-4",children:"Email"}),(0,s.jsx)("th",{className:"py-2 pr-4",children:"Role"}),(0,s.jsx)("th",{className:"py-2 pr-4",children:"Name"}),(0,s.jsx)("th",{className:"py-2 pr-4",children:"Created"}),(0,s.jsx)("th",{className:"py-2 pr-4",children:"Actions"})]})}),(0,s.jsxs)("tbody",{children:[h.map(e=>{var t,r;return(0,s.jsxs)("tr",{className:"border-b border-[color:var(--border)]",children:[(0,s.jsx)("td",{className:"py-2 pr-4",children:e.email}),(0,s.jsx)("td",{className:"py-2 pr-4",children:e.role}),(0,s.jsx)("td",{className:"py-2 pr-4",children:e.firstName||e.lastName?"".concat(null!=(t=e.firstName)?t:""," ").concat(null!=(r=e.lastName)?r:"").trim():"-"}),(0,s.jsx)("td",{className:"py-2 pr-4",children:e.createdAt?new Date(e.createdAt).toLocaleString():"-"}),(0,s.jsx)("td",{className:"py-2 pr-4",children:(0,s.jsx)(l.$n,{type:"button",className:"border border-white/15 bg-white/5 text-white hover:bg-white/10",onClick:()=>U(e),children:"Delete"})})]},e.id)}),0===h.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{className:"py-4 text-[color:var(--color-text-muted)]",colSpan:5,children:"No users found."})}):null]})]})})]}),(0,s.jsxs)(l.Zp,{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",children:"Generate invite"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-white/80",children:"Creates a one-time code. Share the code + link so they can create an account."}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)(n.N,{formError:null!=E?E:void 0,fieldErrors:k}),N?(0,s.jsx)("div",{className:"mt-3 text-sm text-[color:var(--color-text-muted)]",children:N}):null]}),(0,s.jsxs)("div",{className:"mt-6 grid gap-4 sm:grid-cols-3",children:[(0,s.jsxs)("div",{className:"grid gap-2 sm:col-span-2",children:[(0,s.jsx)(l.JU,{htmlFor:"adminInviteEmail",children:"Email"}),(0,s.jsx)(l.pd,{id:"adminInviteEmail",value:b,onChange:e=>j(e.target.value),autoComplete:"off"}),(0,s.jsx)(n.b,{name:"inviteEmail",fieldErrors:k})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(l.JU,{htmlFor:"inviteRole",children:"Role"}),(0,s.jsxs)("select",{id:"inviteRole",className:"w-full rounded-md border border-[color:var(--border)] bg-[var(--surface-soft)] px-3 py-2 text-sm text-[color:var(--foreground)] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--color-primary-600)]",value:y,onChange:e=>w(e.target.value),children:[(0,s.jsx)("option",{value:"player",children:"Player"}),(0,s.jsx)("option",{value:"coach",children:"Coach"}),(0,s.jsx)("option",{value:"evaluator",children:"Evaluator"}),(0,s.jsx)("option",{value:"admin",children:"Admin"})]})]})]}),(0,s.jsx)("div",{className:"mt-4 flex items-center gap-3",children:(0,s.jsx)(l.$n,{type:"button",onClick:D,disabled:A||!b.trim(),children:A?"Creating...":"Create invite"})})]})]})}},2377:(e,t,r)=>{"use strict";r.d(t,{AdminInviteGenerator:()=>d});var s=r(4568),a=r(7620),i=r(6015),n=r(4542),l=r(2883),o=r(5979),c=r(3200);function d(){let[e,t]=(0,a.useState)(""),[r,d]=(0,a.useState)(null),[u,m]=(0,a.useState)(null),[h,v]=(0,a.useState)(void 0),[p,x]=(0,a.useState)(!1);async function f(){d(null),m(null),v(void 0),x(!0);try{let r={};if(e.trim()||(r.inviteEmail=["Email is required."]),Object.keys(r).length>0)return void v(r);let s=(0,o.iD)(),a=(0,o._u)(s);if(!s)throw Error("Please login first.");if("admin"!==a)throw Error("Insufficient permissions.");let i=await (0,l.n)("/admin/evaluator-invites",{method:"POST",token:s,body:JSON.stringify({email:e})}),n="".concat(window.location.origin,"/evaluator/create-account");d("Invite created for ".concat(i.invite.email,". Code: ").concat(i.invite.token,". Link: ").concat(n)),t("")}catch(t){var r;let e=(0,c._)(t);m(null!=(r=e.formError)?r:"Failed to create invite"),v(e.fieldErrors)}finally{x(!1)}}return(0,s.jsxs)(n.Zp,{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",children:"Create evaluator invite"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-white/80",children:"Generates a one-time invite code (expires in 7 days)."}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)(i.N,{formError:null!=u?u:void 0,fieldErrors:h}),r?(0,s.jsx)("div",{className:"mt-3 text-sm text-white/80",children:r}):null]}),(0,s.jsx)("div",{className:"mt-6 grid gap-4 sm:grid-cols-2",children:(0,s.jsxs)("div",{className:"grid gap-2 sm:col-span-2",children:[(0,s.jsx)(n.JU,{htmlFor:"evaluatorInviteEmail",children:"Evaluator email"}),(0,s.jsx)(n.pd,{id:"evaluatorInviteEmail",value:e,onChange:e=>t(e.target.value),autoComplete:"off"}),(0,s.jsx)(i.b,{name:"inviteEmail",fieldErrors:h})]})}),(0,s.jsx)("div",{className:"mt-4 flex items-center gap-3",children:(0,s.jsx)(n.$n,{type:"button",onClick:f,disabled:p||!e.trim(),children:p?"Creating...":"Create invite"})})]})}},2883:(e,t,r)=>{"use strict";r.d(t,{X:()=>a,n:()=>i});var s=r(7011);class a extends Error{constructor(e){super(e.message),this.name="ApiFetchError",this.status=e.status,this.code=e.code,this.details=e.details}}async function i(e,t){var r,i,n,l,o;let c=function(){let e=s.env.NEXT_PUBLIC_API_URL;if(!e)throw Error("Missing NEXT_PUBLIC_API_URL");return e.replace(/\/+$/,"")}(),d=new Headers(null==t?void 0:t.headers);d.set("content-type","application/json"),(null==t?void 0:t.token)&&d.set("authorization","Bearer ".concat(t.token));let u=await fetch("".concat(c).concat(e),{...t,headers:d,cache:"no-store"});if(!u.ok){let e=await u.json().catch(()=>({}));throw new a({message:null!=(l=null==(r=e.error)?void 0:r.message)?l:"Request failed: ".concat(u.status),status:u.status,code:null==(i=e.error)?void 0:i.code,details:null==(n=e.error)?void 0:n.details})}if(204===u.status)return;if(!(null!=(o=u.headers.get("content-type"))?o:"").includes("application/json")){let e=await u.text();if(!e)return;return e}let m=await u.text();if(m)return JSON.parse(m)}},2920:(e,t,r)=>{"use strict";r.d(t,{AdminShowcaseRegistrations:()=>d});var s=r(4568),a=r(7620),i=r(4542),n=r(2883),l=r(5979);function o(e){return e?new Date(e).toLocaleString():"TBD"}function c(e){let t=String(null!=e?e:"");return/[",\n]/.test(t)?'"'.concat(t.replaceAll('"','""'),'"'):t}function d(){let[e,t]=(0,a.useState)(!1),[r,d]=(0,a.useState)(null),[u,m]=(0,a.useState)([]),[h,v]=(0,a.useState)([]),[p,x]=(0,a.useState)(!1),[f,g]=(0,a.useState)(""),[b,j]=(0,a.useState)(""),[y,w]=(0,a.useState)(""),N=(0,a.useMemo)(()=>{let e=new URLSearchParams;return f&&e.set("status",f),b.trim()&&e.set("email",b.trim().toLowerCase()),y.trim()&&e.set("showcaseId",y.trim()),e.toString()},[f,b,y]),S=(0,a.useCallback)(async()=>{d(null),t(!0);try{var e;let t=(0,l.iD)(),r=(0,l._u)(t);if(!t)throw Error("Please login first.");if("admin"!==r)throw Error("Insufficient permissions.");let s=await (0,n.n)("/admin/showcase-registrations?".concat(N),{token:t});m(null!=(e=s.results)?e:[])}catch(e){d(e instanceof Error?e.message:"Failed to load registrations")}finally{t(!1)}},[N]);return(0,a.useEffect)(()=>{S()},[S]),(0,a.useEffect)(()=>{let e=!1;return async function(){x(!0);try{var t;let r=(0,l.iD)(),s=(0,l._u)(r);if(!r||"admin"!==s)return;let a=await (0,n.n)("/admin/showcases",{token:r});e||v(null!=(t=a.results)?t:[])}catch(e){}finally{e||x(!1)}}(),()=>{e=!0}},[]),(0,s.jsxs)(i.Zp,{children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",children:"Showcase registrations"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-white/80",children:"Search and export registration records."})]}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-2",children:[(0,s.jsx)(i.$n,{type:"button",onClick:S,disabled:e,children:e?"Refreshing...":"Refresh"}),(0,s.jsx)(i.$n,{type:"button",className:"border border-white/15 bg-white/5 text-white hover:bg-white/10",onClick:function(){let e=[["createdAt","paymentStatus","fullName","email","role","sport","showcaseTitle","showcaseStart","showcaseCity","showcaseState","stripeCheckoutSessionId","stripePaymentIntentId"],...u.map(e=>{var t,r,s,a,i,n,l,o,c,d,u,m;return[e.createdAt,e.paymentStatus,e.fullName,e.email,null!=(i=e.role)?i:"",null!=(n=e.sport)?n:"",null!=(l=null==(t=e.showcase)?void 0:t.title)?l:"",null!=(o=null==(r=e.showcase)?void 0:r.startDateTime)?o:"",null!=(c=null==(s=e.showcase)?void 0:s.city)?c:"",null!=(d=null==(a=e.showcase)?void 0:a.state)?d:"",null!=(u=e.stripeCheckoutSessionId)?u:"",null!=(m=e.stripePaymentIntentId)?m:""]})].map(e=>e.map(c).join(",")).join("\n");!function(e,t){let r=new Blob([t],{type:"text/csv;charset=utf-8"}),s=URL.createObjectURL(r),a=document.createElement("a");a.href=s,a.download=e,document.body.appendChild(a),a.click(),a.remove(),URL.revokeObjectURL(s)}("showcase-registrations-".concat(new Date().toISOString().slice(0,10),".csv"),e)},disabled:!u.length,children:"Export CSV"})]})]}),r?(0,s.jsx)("p",{className:"mt-4 text-sm text-red-300",children:r}):null,(0,s.jsxs)("div",{className:"mt-6 grid gap-4 sm:grid-cols-3",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(i.JU,{htmlFor:"srStatus",children:"Payment status"}),(0,s.jsxs)("select",{id:"srStatus",value:f,onChange:e=>g(e.target.value),className:"w-full rounded-md border border-[color:var(--border)] bg-[var(--surface-soft)] px-3 py-2 text-sm text-[color:var(--foreground)] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--color-primary-600)]",children:[(0,s.jsx)("option",{value:"",children:"All"}),(0,s.jsx)("option",{value:"paid",children:"paid"}),(0,s.jsx)("option",{value:"pending",children:"pending"}),(0,s.jsx)("option",{value:"failed",children:"failed"}),(0,s.jsx)("option",{value:"refunded",children:"refunded"})]})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(i.JU,{htmlFor:"srEmail",children:"Registrant email"}),(0,s.jsx)(i.pd,{id:"srEmail",value:b,onChange:e=>j(e.target.value),placeholder:"name@example.com"})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(i.JU,{htmlFor:"srShowcase",children:"Showcase"}),(0,s.jsxs)("select",{id:"srShowcase",value:y,onChange:e=>w(e.target.value),className:"w-full rounded-md border border-[color:var(--border)] bg-[var(--surface-soft)] px-3 py-2 text-sm text-[color:var(--foreground)] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--color-primary-600)]",children:[(0,s.jsx)("option",{value:"",children:p?"Loading showcases...":"All showcases"}),h.map(e=>{var t;return(0,s.jsx)("option",{value:e.id,children:(null!=(t=e.title)?t:"Showcase")+(e.startDateTime?" \xb7 ".concat(o(e.startDateTime)):"")},e.id)})]})]})]}),(0,s.jsx)("div",{className:"mt-6 overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full text-left text-sm",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b border-[color:var(--border)] text-[color:var(--muted-2)]",children:[(0,s.jsx)("th",{className:"py-2 pr-4",children:"Created"}),(0,s.jsx)("th",{className:"py-2 pr-4",children:"Status"}),(0,s.jsx)("th",{className:"py-2 pr-4",children:"Name"}),(0,s.jsx)("th",{className:"py-2 pr-4",children:"Email"}),(0,s.jsx)("th",{className:"py-2 pr-4",children:"Showcase"}),(0,s.jsx)("th",{className:"py-2 pr-4",children:"Start"})]})}),(0,s.jsxs)("tbody",{children:[u.map(e=>{var t,r,a,i;return(0,s.jsxs)("tr",{className:"border-b border-[color:var(--border)]",children:[(0,s.jsx)("td",{className:"py-2 pr-4 text-white/80",children:o(e.createdAt)}),(0,s.jsx)("td",{className:"py-2 pr-4 text-white/80",children:e.paymentStatus}),(0,s.jsx)("td",{className:"py-2 pr-4 text-white/80",children:e.fullName}),(0,s.jsx)("td",{className:"py-2 pr-4 text-white/80",children:e.email}),(0,s.jsx)("td",{className:"py-2 pr-4 text-white/80",children:null!=(a=null==(t=e.showcase)?void 0:t.title)?a:"—"}),(0,s.jsx)("td",{className:"py-2 pr-4 text-white/80",children:o(null!=(i=null==(r=e.showcase)?void 0:r.startDateTime)?i:null)})]},e.id)}),0===u.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{className:"py-4 text-[color:var(--muted)]",colSpan:6,children:e?"Loading...":"No registrations found."})}):null]})]})})]})}},3010:(e,t,r)=>{"use strict";r.d(t,{AdminStats:()=>d});var s=r(4568),a=r(9664),i=r.n(a),n=r(7620),l=r(4542),o=r(2883),c=r(5979);function d(){var e,t,r,a,d,u,m,h,v,p,x,f,g;let[b,j]=(0,n.useState)(!1),[y,w]=(0,n.useState)(null),[N,S]=(0,n.useState)(null);function E(e){if("number"!=typeof e||!Number.isFinite(e))return"—";let t=Math.max(0,e),r=Math.floor(t/24),s=Math.round(t%24);return r<=0?"".concat(Math.round(t),"h"):"".concat(r,"d ").concat(s,"h")}async function C(){w(null),j(!0);try{let e=(0,c.iD)(),t=(0,c._u)(e);if(!e)throw Error("Please login first.");if("admin"!==t)throw Error("Insufficient permissions.");let r=await (0,o.n)("/admin/stats",{token:e});S(r)}catch(e){w(e instanceof Error?e.message:"Failed to load stats")}finally{j(!1)}}(0,n.useEffect)(()=>{C()},[]);let k=null!=(e=null==N?void 0:N.submissions.byStatus)?e:{},P=null==N?void 0:N.players,A=null!=(t=null==N?void 0:N.submissions.bySport)?t:[],R=null!=(r=null==N?void 0:N.submissions.byPosition)?r:[],F=null!=(a=null==N?void 0:N.evaluations.bySportPosition)?a:[],I=null!=(d=null==N?void 0:N.evaluations.evaluators)?d:[];return(0,s.jsxs)(l.Zp,{children:[(0,s.jsxs)("div",{className:"flex items-start justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",children:"Dashboard"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-[color:var(--muted)]",children:"Submission and evaluation activity overview."})]}),(0,s.jsx)(l.$n,{type:"button",onClick:C,disabled:b,children:b?"Refreshing...":"Refresh"})]}),y?(0,s.jsx)("p",{className:"mt-4 text-sm text-red-300",children:y}):null,N?(0,s.jsxs)("div",{className:"mt-6 grid gap-4 lg:grid-cols-3",children:[(0,s.jsxs)("div",{className:"rounded-2xl border border-[color:var(--border)] bg-[var(--surface-soft)] p-4",children:[(0,s.jsx)("div",{className:"text-xs uppercase tracking-wide text-[color:var(--muted-2)]",children:"Submissions"}),(0,s.jsx)("div",{className:"mt-1 text-2xl font-semibold",children:N.submissions.total}),(0,s.jsxs)("div",{className:"mt-2 text-sm text-[color:var(--muted)]",children:["submitted: ",null!=(u=k.submitted)?u:0," \xb7 in_review: ",null!=(m=k.in_review)?m:0," \xb7 completed:"," ",null!=(h=k.completed)?h:0]})]}),(0,s.jsxs)("div",{className:"rounded-2xl border border-[color:var(--border)] bg-[var(--surface-soft)] p-4",children:[(0,s.jsx)("div",{className:"text-xs uppercase tracking-wide text-[color:var(--muted-2)]",children:"Evaluations"}),(0,s.jsx)("div",{className:"mt-1 text-2xl font-semibold",children:N.evaluations.total}),(0,s.jsx)("div",{className:"mt-2 text-sm text-[color:var(--muted)]",children:"Grouped by rating below."})]}),(0,s.jsxs)("div",{className:"rounded-2xl border border-[color:var(--border)] bg-[var(--surface-soft)] p-4",children:[(0,s.jsx)("div",{className:"text-xs uppercase tracking-wide text-[color:var(--muted-2)]",children:"Players"}),(0,s.jsx)("div",{className:"mt-1 text-2xl font-semibold",children:null!=(v=null==P?void 0:P.total)?v:"—"}),(0,s.jsx)("div",{className:"mt-2 text-sm text-[color:var(--muted)]",children:"Breakdowns by sport/position below."})]})]}):null,N?(0,s.jsxs)("div",{className:"mt-6 grid gap-4 lg:grid-cols-3",children:[(0,s.jsxs)("div",{className:"rounded-2xl border border-[color:var(--border)] bg-[var(--surface)] p-4",children:[(0,s.jsx)("div",{className:"text-sm font-semibold text-[color:var(--foreground)]",children:"Players by sport"}),(0,s.jsxs)("div",{className:"mt-3 grid gap-1 text-sm text-[color:var(--muted)]",children:[(null!=(p=null==P?void 0:P.bySport)?p:[]).slice(0,10).map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,s.jsx)("div",{className:"text-[color:var(--foreground)]",children:e.sport}),(0,s.jsx)("div",{children:e.count})]},e.sport)),0===(null!=(x=null==P?void 0:P.bySport)?x:[]).length?(0,s.jsx)("div",{children:"—"}):null]})]}),(0,s.jsxs)("div",{className:"rounded-2xl border border-[color:var(--border)] bg-[var(--surface)] p-4",children:[(0,s.jsx)("div",{className:"text-sm font-semibold text-[color:var(--foreground)]",children:"Players by position"}),(0,s.jsxs)("div",{className:"mt-3 grid gap-1 text-sm text-[color:var(--muted)]",children:[(null!=(f=null==P?void 0:P.byPosition)?f:[]).slice(0,10).map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,s.jsx)("div",{className:"text-[color:var(--foreground)]",children:e.position}),(0,s.jsx)("div",{children:e.count})]},e.position)),0===(null!=(g=null==P?void 0:P.byPosition)?g:[]).length?(0,s.jsx)("div",{children:"—"}):null]})]}),(0,s.jsxs)("div",{className:"rounded-2xl border border-[color:var(--border)] bg-[var(--surface)] p-4",children:[(0,s.jsx)("div",{className:"text-xs uppercase tracking-wide text-[color:var(--muted-2)]",children:"Quick links"}),(0,s.jsxs)("div",{className:"mt-2 grid gap-2 text-sm",children:[(0,s.jsx)(i(),{className:"text-indigo-300 hover:text-indigo-200 hover:underline",href:"/evaluator",children:"Evaluator queue"}),(0,s.jsx)(i(),{className:"text-indigo-300 hover:text-indigo-200 hover:underline",href:"/coach",children:"Coach portal"}),(0,s.jsx)(i(),{className:"text-indigo-300 hover:text-indigo-200 hover:underline",href:"/notifications",children:"Notifications"})]})]})]}):null,N?(0,s.jsxs)("div",{className:"mt-6 grid gap-4 lg:grid-cols-2",children:[(0,s.jsxs)("div",{className:"rounded-2xl border border-[color:var(--border)] bg-[var(--surface)] p-4",children:[(0,s.jsx)("div",{className:"text-sm font-semibold text-[color:var(--foreground)]",children:"Submissions by sport"}),(0,s.jsxs)("div",{className:"mt-3 grid gap-1 text-sm text-[color:var(--muted)]",children:[A.slice(0,12).map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,s.jsx)("div",{className:"text-[color:var(--foreground)]",children:e.sport}),(0,s.jsx)("div",{children:e.count})]},e.sport)),0===A.length?(0,s.jsx)("div",{children:"—"}):null]})]}),(0,s.jsxs)("div",{className:"rounded-2xl border border-[color:var(--border)] bg-[var(--surface)] p-4",children:[(0,s.jsx)("div",{className:"text-sm font-semibold text-[color:var(--foreground)]",children:"Submissions by position"}),(0,s.jsxs)("div",{className:"mt-3 grid gap-1 text-sm text-[color:var(--muted)]",children:[R.slice(0,12).map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between gap-3",children:[(0,s.jsx)("div",{className:"text-[color:var(--foreground)]",children:e.position}),(0,s.jsx)("div",{children:e.count})]},e.position)),0===R.length?(0,s.jsx)("div",{children:"—"}):null]})]})]}):null,N?(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-[color:var(--foreground)]",children:"Evaluations by sport / position"}),(0,s.jsx)("div",{className:"mt-3 overflow-x-auto rounded-2xl border border-[color:var(--border)] bg-[var(--surface)]",children:(0,s.jsxs)("table",{className:"w-full min-w-[720px] text-left text-sm",children:[(0,s.jsx)("thead",{className:"border-b border-[color:var(--border)] text-[color:var(--muted-2)]",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-3 font-medium",children:"Sport"}),(0,s.jsx)("th",{className:"px-4 py-3 font-medium",children:"Position"}),(0,s.jsx)("th",{className:"px-4 py-3 font-medium",children:"Count"}),(0,s.jsx)("th",{className:"px-4 py-3 font-medium",children:"Avg grade"}),(0,s.jsx)("th",{className:"px-4 py-3 font-medium",children:"Avg turnaround"})]})}),(0,s.jsxs)("tbody",{children:[F.slice(0,30).map(e=>(0,s.jsxs)("tr",{className:"border-b border-[color:var(--border)] last:border-0",children:[(0,s.jsx)("td",{className:"px-4 py-3 text-[color:var(--foreground)]",children:e.sport}),(0,s.jsx)("td",{className:"px-4 py-3 text-[color:var(--foreground)]",children:e.position}),(0,s.jsx)("td",{className:"px-4 py-3 text-[color:var(--muted)]",children:e.count}),(0,s.jsx)("td",{className:"px-4 py-3 text-[color:var(--muted)]",children:"number"==typeof e.avgGrade?"".concat(e.avgGrade.toFixed(2),"/10"):"—"}),(0,s.jsx)("td",{className:"px-4 py-3 text-[color:var(--muted)]",children:E(e.avgTurnaroundHours)})]},"".concat(e.sport,"::").concat(e.position))),0===F.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{className:"px-4 py-4 text-[color:var(--muted)]",colSpan:5,children:"—"})}):null]})]})})]}):null,N?(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-[color:var(--foreground)]",children:"Evaluator performance"}),(0,s.jsx)("div",{className:"mt-3 overflow-x-auto rounded-2xl border border-[color:var(--border)] bg-[var(--surface)]",children:(0,s.jsxs)("table",{className:"w-full min-w-[720px] text-left text-sm",children:[(0,s.jsx)("thead",{className:"border-b border-[color:var(--border)] text-[color:var(--muted-2)]",children:(0,s.jsxs)("tr",{children:[(0,s.jsx)("th",{className:"px-4 py-3 font-medium",children:"Evaluator"}),(0,s.jsx)("th",{className:"px-4 py-3 font-medium",children:"Count"}),(0,s.jsx)("th",{className:"px-4 py-3 font-medium",children:"Avg grade"}),(0,s.jsx)("th",{className:"px-4 py-3 font-medium",children:"Avg turnaround"})]})}),(0,s.jsxs)("tbody",{children:[I.slice(0,30).map(e=>{var t,r,a,i,n,l,o,c,d;let u=(null==(t=e.user)?void 0:t.firstName)||(null==(r=e.user)?void 0:r.lastName)?"".concat(null!=(o=null==(a=e.user)?void 0:a.firstName)?o:""," ").concat(null!=(c=null==(i=e.user)?void 0:i.lastName)?c:"").trim():null,m=u?"".concat(u).concat((null==(n=e.user)?void 0:n.email)?" (".concat(e.user.email,")"):""):null!=(d=null==(l=e.user)?void 0:l.email)?d:e.evaluatorUserId;return(0,s.jsxs)("tr",{className:"border-b border-[color:var(--border)] last:border-0",children:[(0,s.jsx)("td",{className:"px-4 py-3 text-[color:var(--foreground)]",children:m}),(0,s.jsx)("td",{className:"px-4 py-3 text-[color:var(--muted)]",children:e.count}),(0,s.jsx)("td",{className:"px-4 py-3 text-[color:var(--muted)]",children:"number"==typeof e.avgGrade?"".concat(e.avgGrade.toFixed(2),"/10"):"—"}),(0,s.jsx)("td",{className:"px-4 py-3 text-[color:var(--muted)]",children:E(e.avgTurnaroundHours)})]},e.evaluatorUserId)}),0===I.length?(0,s.jsx)("tr",{children:(0,s.jsx)("td",{className:"px-4 py-4 text-[color:var(--muted)]",colSpan:4,children:"—"})}):null]})]})})]}):null,N?(0,s.jsxs)("div",{className:"mt-6",children:[(0,s.jsx)("h3",{className:"text-sm font-semibold text-[color:var(--foreground)]",children:"Evaluations by rating"}),(0,s.jsxs)("div",{className:"mt-3 grid gap-3",children:[N.evaluations.byGrade.map(e=>(0,s.jsxs)("div",{className:"rounded-2xl border border-[color:var(--border)] bg-[var(--surface)] p-4",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-baseline justify-between gap-2",children:[(0,s.jsxs)("div",{className:"font-semibold",children:["Rating ",e.grade,"/10"]}),(0,s.jsxs)("div",{className:"text-sm text-[color:var(--muted)]",children:[e.count," evaluations"]})]}),e.items.length>0?(0,s.jsx)("div",{className:"mt-3 grid gap-2 text-sm text-[color:var(--muted)]",children:e.items.map(e=>{var t,r;let a=e.playerFirstName||e.playerLastName?"".concat(null!=(t=e.playerFirstName)?t:""," ").concat(null!=(r=e.playerLastName)?r:"").trim():"Player";return(0,s.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("span",{className:"text-[color:var(--foreground)]",children:a}),e.filmTitle?(0,s.jsxs)("span",{children:[" \xb7 ",e.filmTitle]}):null]}),e.playerUserId?(0,s.jsx)(i(),{className:"text-indigo-300 hover:text-indigo-200 hover:underline",href:"/coach/player/".concat(e.playerUserId),children:"View player"}):null]},e.evaluationId)})}):(0,s.jsx)("p",{className:"mt-2 text-sm text-[color:var(--muted)]",children:"No evaluations yet."})]},e.grade)),0===N.evaluations.byGrade.length?(0,s.jsx)("p",{className:"text-sm text-[color:var(--muted)]",children:"No evaluations yet."}):null]})]}):null]})}},3200:(e,t,r)=>{"use strict";r.d(t,{B:()=>i,_:()=>a});var s=r(2883);function a(e){if(e instanceof s.X){let t=e.details,r=(null==t?void 0:t.fieldErrors)&&"object"==typeof t.fieldErrors?t.fieldErrors:void 0,s=Array.isArray(null==t?void 0:t.formErrors)?t.formErrors:[];return{formError:[e.message,...s].filter(Boolean).join(" ")||e.message,fieldErrors:r}}return e instanceof Error?{formError:e.message}:{formError:"Something went wrong."}}function i(e,t){var r;let s=null==e?void 0:e[t];return s&&Array.isArray(s)&&0!==s.length&&null!=(r=s[0])?r:null}},3996:(e,t,r)=>{"use strict";r.d(t,{RoleGuard:()=>o});var s=r(4568),a=r(7541),i=r(7620),n=r(5979);let l={player:"/player",coach:"/coach",evaluator:"/evaluator",admin:"/admin"};function o(e){return!0!==function(e){let t=(0,a.useRouter)(),[r,s]=(0,i.useState)(null),o=e.join(",");return(0,i.useEffect)(()=>{let e=(0,n.iD)(),r=(0,n._u)(e);if(!e||!r){s(!1),t.push("/login");return}if(!new Set(o.split(",").filter(Boolean)).has(r)){var a;s(!1),t.push(null!=(a=l[r])?a:"/");return}s(!0)},[t,o]),r}(e.allowed)?null:(0,s.jsx)(s.Fragment,{children:e.children})}},4542:(e,t,r)=>{"use strict";r.d(t,{$n:()=>a,JU:()=>n,Zp:()=>l,pd:()=>i});var s=r(4568);function a(e){let{className:t="",...r}=e;return(0,s.jsx)("button",{className:"rounded-md bg-indigo-600 px-4 py-2 text-sm font-medium text-white hover:bg-indigo-500 disabled:opacity-60 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--color-primary-600)] ".concat(t),...r})}function i(e){let{className:t="",...r}=e;return(0,s.jsx)("input",{className:"w-full rounded-md border border-[color:var(--border)] bg-[var(--surface-soft)] px-3 py-2 text-sm text-[color:var(--foreground)] placeholder:text-[color:var(--muted-3)] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--color-primary-600)] ".concat(t),...r})}function n(e){return(0,s.jsx)("label",{htmlFor:e.htmlFor,className:"text-sm font-medium text-[color:var(--muted)]",children:e.children})}function l(e){return(0,s.jsx)("div",{className:"rounded-2xl border border-[color:var(--border)] bg-[var(--surface)] p-6",children:e.children})}},5860:(e,t,r)=>{"use strict";r.d(t,{AdminEvaluationTemplates:()=>d});var s=r(4568),a=r(7620),i=r(4542),n=r(8648),l=r(2883),o=r(5979);let c=[{value:"any",label:"Any sport"},{value:"football",label:"Football"},{value:"basketball",label:"Basketball"},{value:"volleyball",label:"Volleyball"},{value:"soccer",label:"Soccer"},{value:"track",label:"Track"},{value:"other",label:"Other"}];function d(){let e=(0,n.S)(),[t,r]=(0,a.useState)(!1),[d,u]=(0,a.useState)(!1),[m,h]=(0,a.useState)(null),[v,p]=(0,a.useState)([]),[x,f]=(0,a.useState)(""),[g,b]=(0,a.useState)(""),[j,y]=(0,a.useState)(""),[w,N]=(0,a.useState)(!0),[S,E]=(0,a.useState)(""),[C,k]=(0,a.useState)("football"),[P,A]=(0,a.useState)("any"),[R,F]=(0,a.useState)(""),[I,U]=(0,a.useState)(""),[D,T]=(0,a.useState)("");function G(e){return e.split("\n").map(e=>e.trim()).filter(e=>e.startsWith("-")||e.startsWith("•")).length}let J=(0,a.useMemo)(()=>R.trim().length>=50&&G(R)>=2,[R]),_=(0,a.useMemo)(()=>I.trim().length>=50&&G(I)>=2,[I]),q=(0,a.useMemo)(()=>S.trim()&&C.trim()&&P.trim()&&J&&_,[S,C,P,J,_]);async function O(){h(null),r(!0);try{let e=(0,o.iD)(),t=(0,o._u)(e);if(!e)throw Error("Please login first.");if("admin"!==t)throw Error("Insufficient permissions.");let r=new URLSearchParams;x&&r.set("sport",x),g&&r.set("position",g),j&&r.set("q",j),w&&r.set("activeOnly","1");let s=await (0,l.n)("/admin/evaluation-templates?".concat(r.toString()),{token:e});p(s.results)}catch(e){h(e instanceof Error?e.message:"Failed to load templates")}finally{r(!1)}}async function L(){h(null),u(!0);try{let e=(0,o.iD)(),t=(0,o._u)(e);if(!e)throw Error("Please login first.");if("admin"!==t)throw Error("Insufficient permissions.");let r=await (0,l.n)("/admin/evaluation-templates",{method:"POST",token:e,body:JSON.stringify({title:S,sport:C,position:P,strengthsTemplate:R,improvementsTemplate:I,notesTemplate:D.trim()?D:void 0,isActive:!0})});E(""),k("football"),A("any"),F(""),U(""),T(""),p(e=>[r,...e])}catch(e){h(e instanceof Error?e.message:"Failed to create template")}finally{u(!1)}}async function M(t){if(await e({title:"Delete template?",message:"This cannot be undone.",confirmText:"Delete",destructive:!0})){h(null);try{let e=(0,o.iD)(),r=(0,o._u)(e);if(!e)throw Error("Please login first.");if("admin"!==r)throw Error("Insufficient permissions.");await (0,l.n)("/admin/evaluation-templates/".concat(encodeURIComponent(t)),{method:"DELETE",token:e}),p(e=>e.filter(e=>e._id!==t))}catch(e){h(e instanceof Error?e.message:"Failed to delete template")}}}return(0,a.useEffect)(()=>{O()},[]),(0,s.jsxs)(i.Zp,{children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",children:"Evaluation templates"}),(0,s.jsxs)("p",{className:"mt-1 text-sm text-[color:var(--muted)]",children:["Templates are used by evaluators to prefill strengths/improvements notes. Use ",(0,s.jsx)("span",{className:"font-semibold",children:"sport=any"})," or"," ",(0,s.jsx)("span",{className:"font-semibold",children:"position=any"})," as a fallback."]})]}),(0,s.jsx)(i.$n,{type:"button",onClick:O,disabled:t,children:t?"Refreshing...":"Refresh"})]}),m?(0,s.jsx)("p",{className:"mt-4 text-sm text-red-300",children:m}):null,(0,s.jsxs)("div",{className:"mt-6 rounded-2xl border border-[color:var(--border)] bg-[var(--surface-soft)] p-4",children:[(0,s.jsx)("div",{className:"text-sm font-semibold text-[color:var(--foreground)]",children:"Create template"}),(0,s.jsxs)("div",{className:"mt-4 grid gap-4 lg:grid-cols-3",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(i.JU,{htmlFor:"tplTitle",children:"Title"}),(0,s.jsx)(i.pd,{id:"tplTitle",value:S,onChange:e=>E(e.target.value),placeholder:"e.g. Football QB – Core rubric"})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(i.JU,{htmlFor:"tplSport",children:"Sport"}),(0,s.jsx)("select",{id:"tplSport",className:"w-full rounded-md border border-[color:var(--border)] bg-[var(--surface-soft)] px-3 py-2 text-sm text-[color:var(--foreground)] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--color-primary-600)]",value:C,onChange:e=>k(e.target.value),children:c.map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(i.JU,{htmlFor:"tplPosition",children:"Position/Event"}),(0,s.jsx)(i.pd,{id:"tplPosition",value:P,onChange:e=>A(e.target.value),placeholder:'Use "any" for wildcard'})]})]}),(0,s.jsxs)("div",{className:"mt-4 grid gap-4 lg:grid-cols-3",children:[(0,s.jsxs)("div",{className:"grid gap-2 lg:col-span-1",children:[(0,s.jsx)(i.JU,{htmlFor:"tplStrengths",children:"Strengths template"}),(0,s.jsx)("textarea",{id:"tplStrengths",className:"min-h-40 w-full rounded-md border border-[color:var(--border)] bg-[var(--surface)] px-3 py-2 text-sm text-[color:var(--foreground)] placeholder:text-[color:var(--muted-3)] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--color-primary-600)]",value:R,onChange:e=>F(e.target.value),placeholder:"- Athleticism:\\n- Technique:\\n- Competitiveness:"}),J?null:(0,s.jsx)("div",{className:"text-xs text-amber-300",children:"Required: at least 2 bullet points and 50+ characters."})]}),(0,s.jsxs)("div",{className:"grid gap-2 lg:col-span-1",children:[(0,s.jsx)(i.JU,{htmlFor:"tplImprovements",children:"Improvements template"}),(0,s.jsx)("textarea",{id:"tplImprovements",className:"min-h-40 w-full rounded-md border border-[color:var(--border)] bg-[var(--surface)] px-3 py-2 text-sm text-[color:var(--foreground)] placeholder:text-[color:var(--muted-3)] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--color-primary-600)]",value:I,onChange:e=>U(e.target.value),placeholder:"- Footwork:\\n- Consistency:\\n- Film study:"}),_?null:(0,s.jsx)("div",{className:"text-xs text-amber-300",children:"Required: at least 2 bullet points and 50+ characters."})]}),(0,s.jsxs)("div",{className:"grid gap-2 lg:col-span-1",children:[(0,s.jsx)(i.JU,{htmlFor:"tplNotes",children:"Notes template (optional)"}),(0,s.jsx)("textarea",{id:"tplNotes",className:"min-h-40 w-full rounded-md border border-[color:var(--border)] bg-[var(--surface)] px-3 py-2 text-sm text-[color:var(--foreground)] placeholder:text-[color:var(--muted-3)] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--color-primary-600)]",value:D,onChange:e=>T(e.target.value),placeholder:"Sport: {sport}\\nPosition: {position}\\n(You can include canned structure here.)"})]})]}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)(i.$n,{type:"button",onClick:L,disabled:d||!q,children:d?"Creating...":"Create template"})})]}),(0,s.jsxs)("div",{className:"mt-6 rounded-2xl border border-[color:var(--border)] bg-[var(--surface-soft)] p-4",children:[(0,s.jsx)("div",{className:"flex flex-wrap items-end justify-between gap-3",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-sm font-semibold text-[color:var(--foreground)]",children:"Templates"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-[color:var(--muted)]",children:"Up to 200 most recently updated."})]})}),(0,s.jsxs)("div",{className:"mt-4 grid gap-4 lg:grid-cols-4",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(i.JU,{htmlFor:"tplFilterSport",children:"Sport"}),(0,s.jsx)(i.pd,{id:"tplFilterSport",value:x,onChange:e=>f(e.target.value),placeholder:"e.g. football / any"})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(i.JU,{htmlFor:"tplFilterPosition",children:"Position"}),(0,s.jsx)(i.pd,{id:"tplFilterPosition",value:g,onChange:e=>b(e.target.value),placeholder:"e.g. Quarterback (QB) / any"})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(i.JU,{htmlFor:"tplFilterQ",children:"Search"}),(0,s.jsx)(i.pd,{id:"tplFilterQ",value:j,onChange:e=>y(e.target.value),placeholder:"Title contains…"})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(i.JU,{htmlFor:"tplActiveOnly",children:"Active only"}),(0,s.jsxs)("select",{id:"tplActiveOnly",className:"w-full rounded-md border border-[color:var(--border)] bg-[var(--surface-soft)] px-3 py-2 text-sm text-[color:var(--foreground)] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--color-primary-600)]",value:w?"1":"0",onChange:e=>N("1"===e.target.value),children:[(0,s.jsx)("option",{value:"1",children:"Yes"}),(0,s.jsx)("option",{value:"0",children:"No (include inactive)"})]})]})]}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)(i.$n,{type:"button",onClick:O,disabled:t,children:t?"Searching...":"Apply filters"})}),(0,s.jsxs)("div",{className:"mt-5 grid gap-3",children:[v.map(e=>(0,s.jsx)("div",{className:"rounded-2xl border border-[color:var(--border)] bg-[var(--surface)] p-4",children:(0,s.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-semibold text-[color:var(--foreground)]",children:e.title}),(0,s.jsxs)("div",{className:"mt-1 text-sm text-[color:var(--muted)]",children:["sport: ",(0,s.jsx)("span",{className:"text-[color:var(--foreground)]",children:e.sport})," \xb7 position:"," ",(0,s.jsx)("span",{className:"text-[color:var(--foreground)]",children:e.position}),!1===e.isActive?(0,s.jsx)("span",{className:"ml-2 text-red-300",children:"inactive"}):null]})]}),(0,s.jsx)(i.$n,{type:"button",className:"border border-white/15 bg-white/5 text-white hover:bg-white/10",onClick:()=>M(e._id),children:"Delete"})]})},e._id)),0===v.length?(0,s.jsx)("p",{className:"text-sm text-[color:var(--muted)]",children:"No templates yet."}):null]})]})]})}},5979:(e,t,r)=>{"use strict";r.d(t,{QG:()=>l,_u:()=>n,bZ:()=>c,iD:()=>a,ki:()=>o});let s="goeducate_access_token";function a(){return window.localStorage.getItem(s)}function i(e){let t="=".repeat((4-e.length%4)%4);return decodeURIComponent(atob((e+t).replace(/-/g,"+").replace(/_/g,"/")).split("").map(e=>"%".concat(e.charCodeAt(0).toString(16).padStart(2,"0"))).join(""))}function n(e){if(!e)return null;let t=e.split(".");if(3!==t.length)return null;try{var r;let e=JSON.parse(i(null!=(r=t[1])?r:""));return"string"==typeof(null==e?void 0:e.role)?e.role:null}catch(e){return null}}function l(e){if(!e)return null;let t=e.split(".");if(3!==t.length)return null;try{var r;let e=JSON.parse(i(null!=(r=t[1])?r:""));return"string"==typeof(null==e?void 0:e.sub)?e.sub:null}catch(e){return null}}function o(e){window.localStorage.setItem(s,e)}function c(){window.localStorage.removeItem(s)}},6015:(e,t,r)=>{"use strict";r.d(t,{N:()=>i,b:()=>n});var s=r(4568),a=r(3200);function i(e){var t,r;let a=Object.entries(null!=(t=e.fieldErrors)?t:{}).filter(e=>{let[,t]=e;return Array.isArray(t)&&t.length>0});return e.formError||a.length>0?(0,s.jsxs)("div",{className:"rounded-xl border border-red-400/30 bg-red-500/10 p-4",children:[(0,s.jsx)("div",{className:"text-sm font-semibold text-red-200",children:null!=(r=e.title)?r:"Please fix the following:"}),(0,s.jsxs)("div",{className:"mt-2 grid gap-1 text-sm text-red-100",children:[e.formError?(0,s.jsx)("div",{children:e.formError}):null,a.length?(0,s.jsx)("ul",{className:"list-disc pl-5",children:a.slice(0,8).map(e=>{let[t,r]=e;return(0,s.jsxs)("li",{children:[(0,s.jsxs)("span",{className:"font-semibold",children:[t,":"]})," ",r[0]]},t)})}):null]})]}):null}function n(e){let t=(0,a.B)(e.fieldErrors,e.name);return t?(0,s.jsx)("div",{className:"text-sm text-red-300",children:t}):null}},6965:(e,t,r)=>{"use strict";r.d(t,{AdminNotificationQueue:()=>c});var s=r(4568),a=r(7620),i=r(8648),n=r(4542),l=r(2883),o=r(5979);function c(){let e=(0,i.S)(),[t,r]=(0,a.useState)(!1),[c,d]=(0,a.useState)(null),[u,m]=(0,a.useState)([]),[h,v]=(0,a.useState)(!0),p=(0,a.useMemo)(()=>{let e=new URLSearchParams;return e.set("limit","100"),h&&e.set("unreadOnly","1"),e.toString()},[h]);async function x(){d(null),r(!0);try{let e=(0,o.iD)(),t=(0,o._u)(e);if(!e)throw Error("Please login first.");if("admin"!==t)throw Error("Insufficient permissions.");let r=await (0,l.n)("/admin/notifications?".concat(p),{token:e});m(r.results)}catch(e){d(e instanceof Error?e.message:"Failed to load notification queue")}finally{r(!1)}}async function f(t){if(await e({title:"Delete notification?",message:"Remove this notification from the queue? This cannot be undone.",confirmText:"Delete",cancelText:"Cancel",destructive:!0})){d(null);try{let e=(0,o.iD)(),r=(0,o._u)(e);if(!e)throw Error("Please login first.");if("admin"!==r)throw Error("Insufficient permissions.");await (0,l.n)("/admin/notifications/".concat(t),{method:"DELETE",token:e}),await x()}catch(e){d(e instanceof Error?e.message:"Failed to delete notification")}}}async function g(){if(await e({title:h?"Delete all unread notifications?":"Delete all notifications?",message:h?"Delete all unread notifications from the queue? This cannot be undone.":"Delete all notifications from the queue? This cannot be undone.",confirmText:"Delete all",cancelText:"Cancel",destructive:!0})){d(null);try{let e=(0,o.iD)(),t=(0,o._u)(e);if(!e)throw Error("Please login first.");if("admin"!==t)throw Error("Insufficient permissions.");let r=h?"?unreadOnly=1":"";await (0,l.n)("/admin/notifications".concat(r),{method:"DELETE",token:e}),await x()}catch(e){d(e instanceof Error?e.message:"Failed to delete all")}}}async function b(){d(null);try{let e=(0,o.iD)(),t=(0,o._u)(e);if(!e)throw Error("Please login first.");if("admin"!==t)throw Error("Insufficient permissions.");let r=h?"?unreadOnly=1":"";await (0,l.n)("/admin/notifications/read".concat(r),{method:"PATCH",token:e}),await x()}catch(e){d(e instanceof Error?e.message:"Failed to mark all read")}}return(0,a.useEffect)(()=>{x()},[p]),(0,s.jsxs)(n.Zp,{children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",children:"Notification queue"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-[color:var(--muted)]",children:"Admin view of recent notifications across all users."})]}),(0,s.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,s.jsx)("button",{type:"button",onClick:()=>v(e=>!e),className:"rounded-md border border-[color:var(--border)] bg-[var(--surface-soft)] px-3 py-1.5 text-sm text-[color:var(--foreground)] hover:bg-[var(--surface)]",children:h?"Showing: Unread":"Showing: All"}),(0,s.jsx)(n.$n,{type:"button",className:"border border-white/15 bg-white/5 text-white hover:bg-white/10",onClick:b,disabled:t||0===u.length,children:"Mark all read"}),(0,s.jsx)(n.$n,{type:"button",className:"border border-white/15 bg-white/5 text-white hover:bg-white/10",onClick:g,disabled:t||0===u.length,children:"Delete all"}),(0,s.jsx)(n.$n,{type:"button",onClick:x,disabled:t,children:t?"Refreshing...":"Refresh"})]})]}),c?(0,s.jsx)("p",{className:"mt-4 text-sm text-red-300",children:c}):null,(0,s.jsxs)("div",{className:"mt-6 grid gap-3",children:[u.map(e=>{var t,r;return(0,s.jsx)("div",{className:"rounded-2xl border border-[color:var(--border)] bg-[var(--surface)] p-4",children:(0,s.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-semibold",children:e.title}),(0,s.jsx)("div",{className:"mt-1 text-sm text-[color:var(--muted)]",children:e.message}),(0,s.jsxs)("div",{className:"mt-2 text-xs text-[color:var(--muted-2)]",children:[(null==(t=e.user)?void 0:t.email)?"".concat(e.user.email," (").concat(null!=(r=e.user.role)?r:"?",")"):"Unknown user",e.type?" \xb7 ".concat(e.type):"",e.createdAt?" \xb7 ".concat(new Date(e.createdAt).toLocaleString()):"",e.readAt?" \xb7 read":" \xb7 unread"]})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[e.href?(0,s.jsx)("a",{className:"text-sm text-indigo-300 hover:text-indigo-200 hover:underline",href:e.href,children:"Open"}):null,(0,s.jsx)(n.$n,{type:"button",onClick:()=>f(e._id),children:"Delete"})]})]})},e._id)}),0!==u.length||c?null:(0,s.jsx)("p",{className:"text-sm text-[color:var(--muted)]",children:"No notifications."})]})]})}},7027:(e,t,r)=>{Promise.resolve().then(r.bind(r,716)),Promise.resolve().then(r.bind(r,9489)),Promise.resolve().then(r.bind(r,7044)),Promise.resolve().then(r.bind(r,140)),Promise.resolve().then(r.bind(r,5860)),Promise.resolve().then(r.bind(r,2377)),Promise.resolve().then(r.bind(r,6965)),Promise.resolve().then(r.bind(r,1640)),Promise.resolve().then(r.bind(r,2920)),Promise.resolve().then(r.bind(r,973)),Promise.resolve().then(r.bind(r,3010)),Promise.resolve().then(r.bind(r,1965)),Promise.resolve().then(r.t.bind(r,9664,23))},7044:(e,t,r)=>{"use strict";r.d(t,{AdminCreateUser:()=>d});var s=r(4568),a=r(7620),i=r(6015),n=r(4542),l=r(2883),o=r(5979),c=r(3200);function d(){let[e,t]=(0,a.useState)(""),[r,d]=(0,a.useState)(""),[u,m]=(0,a.useState)("evaluator"),[h,v]=(0,a.useState)(null),[p,x]=(0,a.useState)(null),[f,g]=(0,a.useState)(void 0),[b,j]=(0,a.useState)(!1);async function y(){v(null),x(null),g(void 0),j(!0);try{let s={};if(e.trim()||(s.email=["Email is required."]),(!r||r.length<8)&&(s.password=["Password must be at least 8 characters."]),Object.keys(s).length>0)return void g(s);let a=(0,o.iD)(),i=(0,o._u)(a);if(!a)throw Error("Please login first.");if("admin"!==i)throw Error("Insufficient permissions.");let n=await (0,l.n)("/admin/users",{method:"POST",token:a,body:JSON.stringify({email:e,password:r,role:u})});v("Created ".concat(n.user.role,": ").concat(n.user.email)),t(""),d(""),m("evaluator")}catch(t){var s;let e=(0,c._)(t);x(null!=(s=e.formError)?s:"Failed to create user"),g(e.fieldErrors)}finally{j(!1)}}return(0,s.jsxs)(n.Zp,{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",children:"Create internal user"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-white/80",children:"Admins can create evaluator/admin accounts."}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),y()},children:[(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)(i.N,{formError:null!=p?p:void 0,fieldErrors:f}),h?(0,s.jsx)("div",{className:"mt-3 text-sm text-white/80",children:h}):null]}),(0,s.jsxs)("div",{className:"mt-6 grid gap-4 sm:grid-cols-2",children:[(0,s.jsxs)("div",{className:"grid gap-2 sm:col-span-2",children:[(0,s.jsx)(n.JU,{htmlFor:"createUserEmail",children:"Email"}),(0,s.jsx)(n.pd,{id:"createUserEmail",value:e,onChange:e=>t(e.target.value),autoComplete:"off"}),(0,s.jsx)(i.b,{name:"email",fieldErrors:f})]}),(0,s.jsxs)("div",{className:"grid gap-2 sm:col-span-2",children:[(0,s.jsx)(n.JU,{htmlFor:"createUserPassword",children:"Password"}),(0,s.jsx)(n.pd,{id:"createUserPassword",type:"password",value:r,onChange:e=>d(e.target.value),autoComplete:"off"}),(0,s.jsx)(i.b,{name:"password",fieldErrors:f})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(n.JU,{htmlFor:"createUserRole",children:"Role"}),(0,s.jsxs)("select",{id:"createUserRole",className:"w-full rounded-md border border-white/10 bg-white/5 px-3 py-2 text-sm text-white/90 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/60",value:u,onChange:e=>m(e.target.value),children:[(0,s.jsx)("option",{value:"evaluator",children:"Evaluator"}),(0,s.jsx)("option",{value:"admin",children:"Admin"})]})]})]}),(0,s.jsx)("div",{className:"mt-4 flex items-center gap-3",children:(0,s.jsx)(n.$n,{type:"submit",disabled:b||!e.trim()||r.length<8,children:b?"Creating...":"Create user"})})]})]})}},8648:(e,t,r)=>{"use strict";r.d(t,{ConfirmProvider:()=>n,S:()=>l});var s=r(4568),a=r(7620);let i=(0,a.createContext)(null);function n(e){let[t,r]=(0,a.useState)({open:!1,title:"Confirm",message:"",confirmText:"Confirm",cancelText:"Cancel",destructive:!1}),n=(0,a.useMemo)(()=>e=>new Promise(t=>{var s,a,i;r({open:!0,title:null!=(s=e.title)?s:"Confirm",message:e.message,confirmText:null!=(a=e.confirmText)?a:"Confirm",cancelText:null!=(i=e.cancelText)?i:"Cancel",destructive:!!e.destructive,resolve:t})}),[]);function l(e){let s=t.resolve;r(e=>({...e,open:!1,resolve:void 0})),null==s||s(e)}return(0,s.jsxs)(i.Provider,{value:n,children:[e.children,t.open?(0,s.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,s.jsx)("div",{className:"absolute inset-0 bg-black/70",onClick:()=>l(!1)}),(0,s.jsxs)("div",{className:"relative w-full max-w-lg rounded-2xl border border-[color:var(--border)] bg-[var(--surface)] p-6 shadow-2xl",children:[(0,s.jsx)("div",{className:"text-lg font-semibold text-[color:var(--foreground)]",children:t.title}),(0,s.jsx)("p",{className:"mt-2 whitespace-pre-wrap text-sm text-[color:var(--muted)]",children:t.message}),(0,s.jsxs)("div",{className:"mt-6 flex flex-wrap justify-end gap-3",children:[(0,s.jsx)("button",{type:"button",className:"rounded-md border border-[color:var(--border)] bg-[var(--surface-soft)] px-4 py-2 text-sm font-medium text-[color:var(--foreground)] hover:bg-[var(--surface)] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/60",onClick:()=>l(!1),children:t.cancelText}),(0,s.jsx)("button",{type:"button",className:"rounded-md px-4 py-2 text-sm font-medium ".concat(t.destructive?"bg-red-500 text-white hover:bg-red-600 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/60":"bg-indigo-600 text-white hover:bg-indigo-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/60"),onClick:()=>l(!0),children:t.confirmText})]})]})]}):null]})}function l(){let e=(0,a.useContext)(i);if(!e)throw Error("useConfirm must be used within ConfirmProvider");return e}},9489:(e,t,r)=>{"use strict";r.d(t,{AdminAccessRequests:()=>o});var s=r(4568),a=r(7620),i=r(4542),n=r(2883),l=r(5979);function o(){var e;let[t,r]=(0,a.useState)("pending"),[o,c]=(0,a.useState)([]),[d,u]=(0,a.useState)(null),[m,h]=(0,a.useState)(null),[v,p]=(0,a.useState)(""),[x,f]=(0,a.useState)(!1),[g,b]=(0,a.useState)(!1),[j,y]=(0,a.useState)(null),w=(0,a.useCallback)(async e=>{y(null),f(!0);try{var t;let r=(0,l.iD)(),s=(0,l._u)(r);if(!r)throw Error("Please login first.");if("admin"!==s)throw Error("Insufficient permissions.");let a="all"===e?"":"?status=".concat(encodeURIComponent(e)),i=await (0,n.n)("/admin/access-requests".concat(a),{token:r});c(null!=(t=i.items)?t:[])}catch(e){y(e instanceof Error?e.message:"Failed to load access requests")}finally{f(!1)}},[]),N=(0,a.useCallback)(async e=>{y(null),u(e),h(null),p("");try{var t;let r=(0,l.iD)(),s=(0,l._u)(r);if(!r)throw Error("Please login first.");if("admin"!==s)throw Error("Insufficient permissions.");let a=await (0,n.n)("/admin/access-requests/".concat(e),{token:r});h(a.item),p(null!=(t=a.item.adminNotes)?t:"")}catch(e){y(e instanceof Error?e.message:"Failed to load request")}},[]);(0,a.useEffect)(()=>{w(t)},[t,w]);let S=(0,a.useCallback)(async e=>{if(d){b(!0),y(null);try{let r=(0,l.iD)(),s=(0,l._u)(r);if(!r)throw Error("Please login first.");if("admin"!==s)throw Error("Insufficient permissions.");await (0,n.n)("/admin/access-requests/".concat(d),{method:"PATCH",token:r,body:JSON.stringify({action:e,adminNotes:v.trim()||void 0})}),y("approve"===e?"Approved and invite email sent (if configured).":"Rejected and applicant notified (if configured)."),u(null),h(null),p(""),await w(t)}catch(e){y(e instanceof Error?e.message:"Failed to update request")}finally{b(!1)}}},[v,t,w,d]);return(0,s.jsxs)(i.Zp,{children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",children:"Access requests"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-white/80",children:"Review invite-only access requests. Approving sends an invite link automatically."})]}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(i.JU,{htmlFor:"arFilter",children:"Filter"}),(0,s.jsxs)("select",{id:"arFilter",className:"rounded-md border border-white/10 bg-white/5 px-3 py-2 text-sm text-white/90 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/60",value:t,onChange:e=>r(e.target.value),children:[(0,s.jsx)("option",{value:"pending",children:"Pending"}),(0,s.jsx)("option",{value:"approved",children:"Approved"}),(0,s.jsx)("option",{value:"rejected",children:"Rejected"}),(0,s.jsx)("option",{value:"all",children:"All"})]}),(0,s.jsx)(i.$n,{type:"button",className:"border border-white/15 bg-white/5 hover:bg-white/10",onClick:()=>w(t),disabled:x,children:x?"Refreshing...":"Refresh"})]})]}),j?(0,s.jsx)("div",{className:"mt-4 text-sm text-white/80",children:j}):null,(0,s.jsxs)("div",{className:"mt-6 grid gap-4 lg:grid-cols-3",children:[(0,s.jsxs)("div",{className:"lg:col-span-1",children:[(0,s.jsx)("div",{className:"text-xs text-white/60",children:"Requests"}),(0,s.jsxs)("div",{className:"mt-2 grid gap-2",children:[0===o.length?(0,s.jsx)("div",{className:"text-sm text-white/70",children:"No results."}):null,o.map(e=>{let t=d===String(e._id),r=e.sportOther?"".concat(e.sport," (").concat(e.sportOther,")"):e.sport;return(0,s.jsxs)("button",{type:"button",onClick:()=>void N(String(e._id)),className:"w-full rounded-xl border px-3 py-2 text-left ".concat(t?"border-indigo-400/40 bg-white/10":"border-white/10 bg-white/5 hover:bg-white/10"),children:[(0,s.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,s.jsx)("div",{className:"text-sm font-semibold text-white",children:e.fullName}),(0,s.jsx)("div",{className:"text-[11px] text-white/60",children:new Date(e.createdAt).toLocaleDateString()})]}),(0,s.jsx)("div",{className:"mt-1 text-xs text-white/70",children:e.email}),(0,s.jsxs)("div",{className:"mt-1 text-xs text-white/70",children:[e.requestedRole," \xb7 ",r," \xb7 ",(0,s.jsx)("span",{className:"text-white/80",children:e.status})]})]},String(e._id))})]})]}),(0,s.jsxs)("div",{className:"lg:col-span-2",children:[(0,s.jsx)("div",{className:"text-xs text-white/60",children:"Detail"}),m?(0,s.jsxs)("div",{className:"mt-2 rounded-2xl border border-white/10 bg-white/5 p-4",children:[(0,s.jsx)("div",{className:"flex flex-wrap items-start justify-between gap-3",children:(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-base font-semibold text-white",children:m.fullName}),(0,s.jsx)("div",{className:"mt-1 text-sm text-white/80",children:m.email}),(0,s.jsxs)("div",{className:"mt-1 text-sm text-white/80",children:["Role: ",(0,s.jsx)("span",{className:"text-white",children:m.requestedRole})," \xb7 Sport:"," ",(0,s.jsx)("span",{className:"text-white",children:m.sportOther?"".concat(m.sport," (").concat(m.sportOther,")"):m.sport})]}),(0,s.jsxs)("div",{className:"mt-1 text-sm text-white/70",children:["Status: ",(0,s.jsx)("span",{className:"text-white",children:m.status}),m.reviewedAt?" \xb7 Reviewed: ".concat(new Date(m.reviewedAt).toLocaleString()):""]})]})}),(0,s.jsxs)("div",{className:"mt-4",children:[(0,s.jsx)("div",{className:"text-sm font-semibold text-white",children:"Answers"}),(0,s.jsx)("div",{className:"mt-2 grid gap-2",children:Object.entries(null!=(e=m.answers)?e:{}).map(e=>{let[t,r]=e;return(0,s.jsxs)("div",{className:"rounded-xl border border-white/10 bg-white/5 p-3",children:[(0,s.jsx)("div",{className:"text-xs text-white/60",children:t}),(0,s.jsx)("div",{className:"mt-1 text-sm text-white/90",children:Array.isArray(r)?r.join(", "):r})]},t)})})]}),(0,s.jsxs)("div",{className:"mt-4 grid gap-2",children:[(0,s.jsx)(i.JU,{htmlFor:"adminNotes",children:"Admin notes (internal)"}),(0,s.jsx)(i.pd,{id:"adminNotes",value:v,onChange:e=>p(e.target.value),placeholder:"Optional notes (not sent to applicant)"}),(0,s.jsxs)("div",{className:"mt-2 flex flex-wrap items-center gap-2",children:[(0,s.jsx)(i.$n,{type:"button",onClick:()=>void S("approve"),disabled:g,children:g?"Saving...":"Approve + send invite"}),(0,s.jsx)(i.$n,{type:"button",onClick:()=>void S("reject"),disabled:g,className:"border border-white/15 bg-white/5 hover:bg-white/10",children:"Reject"})]})]})]}):(0,s.jsx)("div",{className:"mt-2 text-sm text-white/70",children:"Select a request to view details."})]})]})]})}}},e=>{e.O(0,[664,800,587,18,358],()=>e(e.s=7027)),_N_E=e.O()}]);