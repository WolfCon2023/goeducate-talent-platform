(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[443],{722:(e,t,l)=>{"use strict";l.d(t,{PlayerEvaluationDetail:()=>d});var r=l(4568),a=l(9664),n=l.n(a),s=l(7620),i=l(4542),o=l(2883),c=l(5979);function d(e){var t,l,a,d,u,h,m;let x=e.filmSubmissionId,[p,v]=(0,s.useState)(!1),[f,g]=(0,s.useState)(null),[w,b]=(0,s.useState)(null),[j,N]=(0,s.useState)(null),[y,k]=(0,s.useState)(null);async function S(){g(null),k(null),v(!0);try{let e=(0,c.iD)(),t=(0,c._u)(e);if(!e)throw Error("Please login first.");if(t&&"player"!==t)throw Error("This page is only available to player accounts.");let l=await (0,o.n)("/film-submissions/".concat(x),{token:e});b(l);try{let t=await (0,o.n)("/evaluations/film/".concat(x),{token:e});N(t)}catch(e){N(null),k(e instanceof Error?e.message:"No evaluation yet.")}}catch(e){g(e instanceof Error?e.message:"Failed to load evaluation")}finally{v(!1)}}(0,s.useEffect)(()=>{S()},[x]);let E=(0,s.useMemo)(()=>w?["GoEd Talent Platform – Evaluation","","Film: ".concat(w.title),w.opponent?"Opponent: ".concat(w.opponent):null,w.gameDate?"Game date: ".concat(new Date(w.gameDate).toLocaleDateString()):null,"Status: ".concat(w.status.replace("_"," ")),j?"Overall grade: ".concat(j.overallGrade,"/10"):"Evaluation: not completed yet","","Link: ".concat(window.location.href)].filter(Boolean).join("\n"):"",[w,j]);async function P(e){try{await navigator.clipboard.writeText(e)}catch(e){}}return(0,r.jsxs)("div",{className:"grid gap-8",children:[(0,r.jsxs)("div",{className:"hidden print:block",children:[(0,r.jsxs)("div",{className:"flex flex-col items-center gap-2",children:[(0,r.jsx)("img",{src:"/logo.png",alt:"GoEducate Talent",className:"h-12 w-12"}),(0,r.jsx)("div",{className:"text-center text-2xl font-semibold tracking-tight text-black",children:"GoEducate Talent Report"}),(0,r.jsxs)("div",{className:"text-center text-sm text-black/70",children:[(null==w?void 0:w.title)?"Film: ".concat(w.title):"",(null==j?void 0:j.createdAt)?" \xb7 Created: ".concat(new Date(j.createdAt).toLocaleString()):""]})]}),(0,r.jsx)("div",{className:"mt-4 border-b border-neutral-300"})]}),(0,r.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-6 print:hidden",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold tracking-tight",children:"Evaluation"}),(0,r.jsx)("p",{className:"mt-2 text-sm text-white/80",children:"Full evaluation report for this film submission."})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)(n(),{href:"/player/film",className:"text-sm text-indigo-300 hover:text-indigo-200 hover:underline",children:"Back to submissions"}),(0,r.jsx)(i.$n,{type:"button",onClick:S,disabled:p,children:p?"Refreshing...":"Refresh"})]})]}),f?(0,r.jsx)("p",{className:"text-sm text-red-300",children:f}):null,(0,r.jsx)(i.Zp,{children:(0,r.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-lg font-semibold",children:null!=(a=null==w?void 0:w.title)?a:p?"Loading...":"Film"}),(0,r.jsxs)("div",{className:"mt-1 text-sm text-white/80",children:[(null==w?void 0:w.opponent)?(0,r.jsxs)(r.Fragment,{children:["Opponent: ",w.opponent]}):null,(null==w?void 0:w.opponent)&&(null==w?void 0:w.gameDate)?" \xb7 ":null,(null==w?void 0:w.gameDate)?(0,r.jsxs)(r.Fragment,{children:["Game date: ",new Date(w.gameDate).toLocaleDateString()]}):null,w?" \xb7 ".concat(w.status.replace("_"," ")):null]}),(null==w?void 0:w.videoUrl)?(0,r.jsx)("div",{className:"mt-2 text-sm print:hidden",children:(0,r.jsx)("a",{className:"text-indigo-300 hover:text-indigo-200 hover:underline",href:w.videoUrl,target:"_blank",rel:"noreferrer",children:"View video link"})}):null,(null==w?void 0:w.notes)?(0,r.jsx)("p",{className:"mt-3 text-sm text-white/80 whitespace-pre-wrap",children:w.notes}):null]}),(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-2 print:hidden",children:[(0,r.jsx)(i.$n,{type:"button",onClick:()=>P(window.location.href),disabled:!w,children:"Copy link"}),(0,r.jsx)(i.$n,{type:"button",onClick:()=>P(E),disabled:!w,children:"Copy summary"}),(0,r.jsx)(i.$n,{type:"button",onClick:()=>window.print(),disabled:!w,children:"Print / Save PDF"}),(0,r.jsx)(i.$n,{type:"button",onClick:function(){let e=new Blob([JSON.stringify({film:w,report:j},null,2)],{type:"application/json"}),t=URL.createObjectURL(e),l=document.createElement("a");l.href=t,l.download="evaluation-".concat(x,".json"),document.body.appendChild(l),l.click(),l.remove(),URL.revokeObjectURL(t)},disabled:!w,children:"Download JSON"})]})]})}),(0,r.jsxs)(i.Zp,{children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-baseline justify-between gap-2",children:[(0,r.jsx)("h2",{className:"text-lg font-semibold",children:"Evaluation report"}),(null==j?void 0:j.createdAt)?(0,r.jsxs)("div",{className:"text-xs text-white/60",children:["Created: ",new Date(j.createdAt).toLocaleString()]}):null]}),j?(0,r.jsxs)("div",{className:"mt-5 grid gap-5 text-sm text-white/90",children:[j.sport||j.position||j.positionOther?(0,r.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4",children:[(0,r.jsx)("div",{className:"text-xs uppercase tracking-wide text-white/70",children:"Sport / Position"}),(0,r.jsxs)("div",{className:"mt-1 text-sm text-white/90",children:[j.sport?j.sport:"—"," \xb7 ","Other"===j.position?null!=(d=j.positionOther)?d:"Other":null!=(u=j.position)?u:"—"]})]}):null,(0,r.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4",children:[(0,r.jsx)("div",{className:"text-xs uppercase tracking-wide text-white/70",children:"Overall grade"}),(0,r.jsxs)("div",{className:"mt-1 text-2xl font-semibold",children:[j.overallGrade,"/10"]})]}),"number"==typeof j.overallGradeRaw?(0,r.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4",children:[(0,r.jsx)("div",{className:"text-xs uppercase tracking-wide text-white/70",children:"Average score"}),(0,r.jsxs)("div",{className:"mt-1 flex flex-wrap items-baseline justify-between gap-3",children:[(0,r.jsxs)("div",{className:"text-2xl font-semibold",children:[j.overallGradeRaw.toFixed(1),"/10"]}),(0,r.jsxs)("div",{className:"text-sm text-white/80",children:["Suggested projection: ",null!=(h=j.suggestedProjectionLabel)?h:(m=j.overallGradeRaw)>=9?"Elite Upside":m>=7.5?"High Upside":m>=6?"Solid":"Developmental"]})]}),(0,r.jsxs)("div",{className:"mt-3 relative h-3 w-full overflow-hidden rounded-full border border-white/10 bg-white/5",children:[(0,r.jsx)("div",{className:"absolute inset-0",style:{background:"linear-gradient(90deg, rgba(239,68,68,.85) 0%, rgba(245,158,11,.85) 35%, rgba(99,102,241,.9) 70%, rgba(16,185,129,.9) 100%)"}}),(0,r.jsx)("div",{className:"absolute top-0 h-full w-1 rounded-full bg-white",style:{left:"".concat(Math.max(0,Math.min(100,(j.overallGradeRaw-1)/9*100)),"%")},"aria-hidden":!0})]})]}):null,(null==(l=j.rubric)||null==(t=l.categories)?void 0:t.length)?(0,r.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4",children:[(0,r.jsx)("div",{className:"text-xs uppercase tracking-wide text-white/70",children:"Rubric"}),(0,r.jsx)("div",{className:"mt-3 grid gap-4",children:j.rubric.categories.map(e=>(0,r.jsxs)("div",{className:"rounded-xl border border-white/10 bg-white/5 p-3",children:[(0,r.jsx)("div",{className:"font-semibold text-white",children:e.key}),(0,r.jsx)("div",{className:"mt-2 grid gap-1 text-sm text-white/80",children:e.traits.map(e=>{var t;return(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,r.jsx)("div",{className:"text-white/90",children:e.key}),(0,r.jsx)("div",{className:"text-white/70",children:"number"==typeof e.valueNumber?e.valueNumber:null!=(t=e.valueOption)?t:"—"})]},e.key)})})]},e.key))})]}):null,(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-xs uppercase tracking-wide text-white/70",children:"Strengths"}),(0,r.jsx)("div",{className:"mt-2 whitespace-pre-wrap",children:j.strengths})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-xs uppercase tracking-wide text-white/70",children:"Improvements"}),(0,r.jsx)("div",{className:"mt-2 whitespace-pre-wrap",children:j.improvements})]}),j.notes?(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{className:"text-xs uppercase tracking-wide text-white/70",children:"Notes"}),(0,r.jsx)("div",{className:"mt-2 whitespace-pre-wrap",children:j.notes})]}):null]}):(0,r.jsx)("div",{className:"mt-4",children:(0,r.jsx)("p",{className:"text-sm text-white/80",children:(null==y?void 0:y.toLowerCase().includes("not found"))||(null==y?void 0:y.toLowerCase().includes("no evaluation"))?"No evaluation yet. Check back once an evaluator completes your report.":null!=y?y:"No evaluation yet."})})]})]})}},2883:(e,t,l)=>{"use strict";l.d(t,{X:()=>a,n:()=>n});var r=l(7011);class a extends Error{constructor(e){super(e.message),this.name="ApiFetchError",this.status=e.status,this.code=e.code,this.details=e.details}}async function n(e,t){var l,n,s,i,o;let c=function(){let e=r.env.NEXT_PUBLIC_API_URL;if(!e)throw Error("Missing NEXT_PUBLIC_API_URL");return e.replace(/\/+$/,"")}(),d=new Headers(null==t?void 0:t.headers);d.set("content-type","application/json"),(null==t?void 0:t.token)&&d.set("authorization","Bearer ".concat(t.token));let u=await fetch("".concat(c).concat(e),{...t,headers:d,cache:"no-store"});if(!u.ok){let e=await u.json().catch(()=>({}));throw new a({message:null!=(i=null==(l=e.error)?void 0:l.message)?i:"Request failed: ".concat(u.status),status:u.status,code:null==(n=e.error)?void 0:n.code,details:null==(s=e.error)?void 0:s.details})}if(204===u.status)return;if(!(null!=(o=u.headers.get("content-type"))?o:"").includes("application/json")){let e=await u.text();if(!e)return;return e}let h=await u.text();if(h)return JSON.parse(h)}},3996:(e,t,l)=>{"use strict";l.d(t,{RoleGuard:()=>o});var r=l(4568),a=l(7541),n=l(7620),s=l(5979);let i={player:"/player",coach:"/coach",evaluator:"/evaluator",admin:"/admin"};function o(e){return!0!==function(e){let t=(0,a.useRouter)(),[l,r]=(0,n.useState)(null),o=e.join(",");return(0,n.useEffect)(()=>{let e=(0,s.iD)(),l=(0,s._u)(e);if(!e||!l){r(!1),t.push("/login");return}if(!new Set(o.split(",").filter(Boolean)).has(l)){var a;r(!1),t.push(null!=(a=i[l])?a:"/");return}r(!0)},[t,o]),l}(e.allowed)?null:(0,r.jsx)(r.Fragment,{children:e.children})}},4542:(e,t,l)=>{"use strict";l.d(t,{$n:()=>a,JU:()=>s,Zp:()=>i,pd:()=>n});var r=l(4568);function a(e){let{className:t="",...l}=e;return(0,r.jsx)("button",{className:"rounded-md bg-indigo-600 px-4 py-2 text-sm font-medium text-white hover:bg-indigo-500 disabled:opacity-60 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--color-primary-600)] ".concat(t),...l})}function n(e){let{className:t="",...l}=e;return(0,r.jsx)("input",{className:"w-full rounded-md border border-[color:var(--border)] bg-[var(--surface-soft)] px-3 py-2 text-sm text-[color:var(--foreground)] placeholder:text-[color:var(--muted-3)] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--color-primary-600)] ".concat(t),...l})}function s(e){return(0,r.jsx)("label",{htmlFor:e.htmlFor,className:"text-sm font-medium text-[color:var(--muted)]",children:e.children})}function i(e){return(0,r.jsx)("div",{className:"rounded-2xl border border-[color:var(--border)] bg-[var(--surface)] p-6",children:e.children})}},4837:(e,t,l)=>{Promise.resolve().then(l.bind(l,8691)),Promise.resolve().then(l.bind(l,722))},5979:(e,t,l)=>{"use strict";l.d(t,{QG:()=>i,_u:()=>s,bZ:()=>c,iD:()=>a,ki:()=>o});let r="goeducate_access_token";function a(){return window.localStorage.getItem(r)}function n(e){let t="=".repeat((4-e.length%4)%4);return decodeURIComponent(atob((e+t).replace(/-/g,"+").replace(/_/g,"/")).split("").map(e=>"%".concat(e.charCodeAt(0).toString(16).padStart(2,"0"))).join(""))}function s(e){if(!e)return null;let t=e.split(".");if(3!==t.length)return null;try{var l;let e=JSON.parse(n(null!=(l=t[1])?l:""));return"string"==typeof(null==e?void 0:e.role)?e.role:null}catch(e){return null}}function i(e){if(!e)return null;let t=e.split(".");if(3!==t.length)return null;try{var l;let e=JSON.parse(n(null!=(l=t[1])?l:""));return"string"==typeof(null==e?void 0:e.sub)?e.sub:null}catch(e){return null}}function o(e){window.localStorage.setItem(r,e)}function c(){window.localStorage.removeItem(r)}},7541:(e,t,l)=>{"use strict";var r=l(3041);l.o(r,"useParams")&&l.d(t,{useParams:function(){return r.useParams}}),l.o(r,"usePathname")&&l.d(t,{usePathname:function(){return r.usePathname}}),l.o(r,"useRouter")&&l.d(t,{useRouter:function(){return r.useRouter}}),l.o(r,"useSearchParams")&&l.d(t,{useSearchParams:function(){return r.useSearchParams}})},8691:(e,t,l)=>{"use strict";l.d(t,{PlayerGuard:()=>n});var r=l(4568),a=l(3996);function n(e){return(0,r.jsx)(a.RoleGuard,{allowed:["player"],children:e.children})}}},e=>{e.O(0,[664,587,18,358],()=>e(e.s=4837)),_N_E=e.O()}]);