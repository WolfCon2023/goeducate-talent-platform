(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[182],{2857:(e,r,t)=>{Promise.resolve().then(t.bind(t,3656))},2883:(e,r,t)=>{"use strict";t.d(r,{X:()=>a,n:()=>n});var s=t(7011);class a extends Error{constructor(e){super(e.message),this.name="ApiFetchError",this.status=e.status,this.code=e.code,this.details=e.details}}async function n(e,r){var t,n,l,o,i;let u=function(){let e=s.env.NEXT_PUBLIC_API_URL;if(!e)throw Error("Missing NEXT_PUBLIC_API_URL");return e.replace(/\/+$/,"")}(),d=new Headers(null==r?void 0:r.headers);d.set("content-type","application/json"),(null==r?void 0:r.token)&&d.set("authorization","Bearer ".concat(r.token));let c=await fetch("".concat(u).concat(e),{...r,headers:d,cache:"no-store"});if(!c.ok){let e=await c.json().catch(()=>({}));throw new a({message:null!=(o=null==(t=e.error)?void 0:t.message)?o:"Request failed: ".concat(c.status),status:c.status,code:null==(n=e.error)?void 0:n.code,details:null==(l=e.error)?void 0:l.details})}if(204===c.status)return;if(!(null!=(i=c.headers.get("content-type"))?i:"").includes("application/json")){let e=await c.text();if(!e)return;return e}let m=await c.text();if(m)return JSON.parse(m)}},3200:(e,r,t)=>{"use strict";t.d(r,{B:()=>n,_:()=>a});var s=t(2883);function a(e){if(e instanceof s.X){let r=e.details,t=(null==r?void 0:r.fieldErrors)&&"object"==typeof r.fieldErrors?r.fieldErrors:void 0,s=Array.isArray(null==r?void 0:r.formErrors)?r.formErrors:[];return{formError:[e.message,...s].filter(Boolean).join(" ")||e.message,fieldErrors:t}}return e instanceof Error?{formError:e.message}:{formError:"Something went wrong."}}function n(e,r){var t;let s=null==e?void 0:e[r];return s&&Array.isArray(s)&&0!==s.length&&null!=(t=s[0])?t:null}},3656:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>c});var s=t(4568),a=t(7541),n=t(7620),l=t(4542),o=t(2883),i=t(5979),u=t(6015),d=t(3200);function c(){let e=(0,a.useRouter)(),[r,t]=(0,n.useState)(""),[c,m]=(0,n.useState)(""),[f,h]=(0,n.useState)(""),[v,p]=(0,n.useState)(""),[g,x]=(0,n.useState)(null),[b,j]=(0,n.useState)(void 0),[N,w]=(0,n.useState)(!1);async function y(t){t.preventDefault(),x(null),j(void 0),w(!0);try{let t={};if(r.trim()||(t.token=["Invite code is required."]),(!v||v.length<8)&&(t.password=["Password must be at least 8 characters."]),Object.keys(t).length>0)return void j(t);let s=await (0,o.n)("/auth/accept-invite",{method:"POST",body:JSON.stringify({token:r,firstName:c||void 0,lastName:f||void 0,password:v})});(0,i.ki)(s.token),"player"===s.user.role?e.push("/player"):"coach"===s.user.role?e.push("/coach"):"evaluator"===s.user.role?e.push("/evaluator"):"admin"===s.user.role?e.push("/admin"):e.push("/")}catch(r){var s;let e=(0,d._)(r);x(null!=(s=e.formError)?s:"Failed to accept invite"),j(e.fieldErrors)}finally{w(!1)}}return(0,s.jsx)("div",{className:"mx-auto max-w-md",children:(0,s.jsxs)(l.Zp,{children:[(0,s.jsx)("h1",{className:"text-xl font-semibold",children:"Create account (Invite)"}),(0,s.jsx)("p",{className:"mt-1 text-sm text-white/80",children:"Use the invite code provided by an admin."}),(0,s.jsxs)("form",{onSubmit:y,className:"mt-6 grid gap-4",children:[(0,s.jsx)(u.N,{formError:null!=g?g:void 0,fieldErrors:b}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(l.JU,{htmlFor:"token",children:"Invite code"}),(0,s.jsx)(l.pd,{id:"token",value:r,onChange:e=>t(e.target.value),autoComplete:"off"}),(0,s.jsx)(u.b,{name:"token",fieldErrors:b})]}),(0,s.jsxs)("div",{className:"grid gap-4 sm:grid-cols-2",children:[(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(l.JU,{htmlFor:"firstName",children:"First name (required for coach/admin/evaluator)"}),(0,s.jsx)(l.pd,{id:"firstName",value:c,onChange:e=>m(e.target.value),autoComplete:"given-name"})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(l.JU,{htmlFor:"lastName",children:"Last name (required for coach/admin/evaluator)"}),(0,s.jsx)(l.pd,{id:"lastName",value:f,onChange:e=>h(e.target.value),autoComplete:"family-name"})]})]}),(0,s.jsxs)("div",{className:"grid gap-2",children:[(0,s.jsx)(l.JU,{htmlFor:"password",children:"Password"}),(0,s.jsx)(l.pd,{id:"password",type:"password",value:v,onChange:e=>p(e.target.value),autoComplete:"new-password"}),(0,s.jsx)(u.b,{name:"password",fieldErrors:b})]}),(0,s.jsx)(l.$n,{type:"submit",disabled:N||!r.trim()||v.length<8,children:N?"Creating...":"Create account"})]})]})})}},4542:(e,r,t)=>{"use strict";t.d(r,{$n:()=>a,JU:()=>l,Zp:()=>o,pd:()=>n});var s=t(4568);function a(e){let{className:r="",...t}=e;return(0,s.jsx)("button",{className:"rounded-md bg-indigo-600 px-4 py-2 text-sm font-medium text-white hover:bg-indigo-500 disabled:opacity-60 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--color-primary-600)] ".concat(r),...t})}function n(e){let{className:r="",...t}=e;return(0,s.jsx)("input",{className:"w-full rounded-md border border-[color:var(--border)] bg-[var(--surface-soft)] px-3 py-2 text-sm text-[color:var(--foreground)] placeholder:text-[color:var(--muted-3)] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--color-primary-600)] ".concat(r),...t})}function l(e){return(0,s.jsx)("label",{htmlFor:e.htmlFor,className:"text-sm font-medium text-[color:var(--muted)]",children:e.children})}function o(e){return(0,s.jsx)("div",{className:"rounded-2xl border border-[color:var(--border)] bg-[var(--surface)] p-6",children:e.children})}},5979:(e,r,t)=>{"use strict";t.d(r,{QG:()=>o,_u:()=>l,bZ:()=>u,iD:()=>a,ki:()=>i});let s="goeducate_access_token";function a(){return window.localStorage.getItem(s)}function n(e){let r="=".repeat((4-e.length%4)%4);return decodeURIComponent(atob((e+r).replace(/-/g,"+").replace(/_/g,"/")).split("").map(e=>"%".concat(e.charCodeAt(0).toString(16).padStart(2,"0"))).join(""))}function l(e){if(!e)return null;let r=e.split(".");if(3!==r.length)return null;try{var t;let e=JSON.parse(n(null!=(t=r[1])?t:""));return"string"==typeof(null==e?void 0:e.role)?e.role:null}catch(e){return null}}function o(e){if(!e)return null;let r=e.split(".");if(3!==r.length)return null;try{var t;let e=JSON.parse(n(null!=(t=r[1])?t:""));return"string"==typeof(null==e?void 0:e.sub)?e.sub:null}catch(e){return null}}function i(e){window.localStorage.setItem(s,e)}function u(){window.localStorage.removeItem(s)}},6015:(e,r,t)=>{"use strict";t.d(r,{N:()=>n,b:()=>l});var s=t(4568),a=t(3200);function n(e){var r,t;let a=Object.entries(null!=(r=e.fieldErrors)?r:{}).filter(e=>{let[,r]=e;return Array.isArray(r)&&r.length>0});return e.formError||a.length>0?(0,s.jsxs)("div",{className:"rounded-xl border border-red-400/30 bg-red-500/10 p-4",children:[(0,s.jsx)("div",{className:"text-sm font-semibold text-red-200",children:null!=(t=e.title)?t:"Please fix the following:"}),(0,s.jsxs)("div",{className:"mt-2 grid gap-1 text-sm text-red-100",children:[e.formError?(0,s.jsx)("div",{children:e.formError}):null,a.length?(0,s.jsx)("ul",{className:"list-disc pl-5",children:a.slice(0,8).map(e=>{let[r,t]=e;return(0,s.jsxs)("li",{children:[(0,s.jsxs)("span",{className:"font-semibold",children:[r,":"]})," ",t[0]]},r)})}):null]})]}):null}function l(e){let r=(0,a.B)(e.fieldErrors,e.name);return r?(0,s.jsx)("div",{className:"text-sm text-red-300",children:r}):null}},7541:(e,r,t)=>{"use strict";var s=t(3041);t.o(s,"useParams")&&t.d(r,{useParams:function(){return s.useParams}}),t.o(s,"usePathname")&&t.d(r,{usePathname:function(){return s.usePathname}}),t.o(s,"useRouter")&&t.d(r,{useRouter:function(){return s.useRouter}}),t.o(s,"useSearchParams")&&t.d(r,{useSearchParams:function(){return s.useSearchParams}})}},e=>{e.O(0,[587,18,358],()=>e(e.s=2857)),_N_E=e.O()}]);