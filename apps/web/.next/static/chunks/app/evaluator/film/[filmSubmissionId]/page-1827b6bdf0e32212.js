(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[865],{623:(e,t,i)=>{Promise.resolve().then(i.bind(i,9754)),Promise.resolve().then(i.bind(i,4575)),Promise.resolve().then(i.t.bind(i,9664,23))},2883:(e,t,i)=>{"use strict";i.d(t,{X:()=>s,n:()=>l});var r=i(7011);class s extends Error{constructor(e){super(e.message),this.name="ApiFetchError",this.status=e.status,this.code=e.code,this.details=e.details}}async function l(e,t){var i,l,n,a,o;let c=function(){let e=r.env.NEXT_PUBLIC_API_URL;if(!e)throw Error("Missing NEXT_PUBLIC_API_URL");return e.replace(/\/+$/,"")}(),d=new Headers(null==t?void 0:t.headers);d.set("content-type","application/json"),(null==t?void 0:t.token)&&d.set("authorization","Bearer ".concat(t.token));let u=await fetch("".concat(c).concat(e),{...t,headers:d,cache:"no-store"});if(!u.ok){let e=await u.json().catch(()=>({}));throw new s({message:null!=(a=null==(i=e.error)?void 0:i.message)?a:"Request failed: ".concat(u.status),status:u.status,code:null==(l=e.error)?void 0:l.code,details:null==(n=e.error)?void 0:n.details})}if(204===u.status)return;if(!(null!=(o=u.headers.get("content-type"))?o:"").includes("application/json")){let e=await u.text();if(!e)return;return e}let m=await u.text();if(m)return JSON.parse(m)}},3996:(e,t,i)=>{"use strict";i.d(t,{RoleGuard:()=>o});var r=i(4568),s=i(7541),l=i(7620),n=i(5979);let a={player:"/player",coach:"/coach",evaluator:"/evaluator",admin:"/admin"};function o(e){return!0!==function(e){let t=(0,s.useRouter)(),[i,r]=(0,l.useState)(null),o=e.join(",");return(0,l.useEffect)(()=>{let e=(0,n.iD)(),i=(0,n._u)(e);if(!e||!i){r(!1),t.push("/login");return}if(!new Set(o.split(",").filter(Boolean)).has(i)){var s;r(!1),t.push(null!=(s=a[i])?s:"/");return}r(!0)},[t,o]),i}(e.allowed)?null:(0,r.jsx)(r.Fragment,{children:e.children})}},4542:(e,t,i)=>{"use strict";i.d(t,{$n:()=>s,JU:()=>n,Zp:()=>a,pd:()=>l});var r=i(4568);function s(e){let{className:t="",...i}=e;return(0,r.jsx)("button",{className:"rounded-md bg-indigo-600 px-4 py-2 text-sm font-medium text-white hover:bg-indigo-500 disabled:opacity-60 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--color-primary-600)] ".concat(t),...i})}function l(e){let{className:t="",...i}=e;return(0,r.jsx)("input",{className:"w-full rounded-md border border-[color:var(--border)] bg-[var(--surface-soft)] px-3 py-2 text-sm text-[color:var(--foreground)] placeholder:text-[color:var(--muted-3)] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--color-primary-600)] ".concat(t),...i})}function n(e){return(0,r.jsx)("label",{htmlFor:e.htmlFor,className:"text-sm font-medium text-[color:var(--muted)]",children:e.children})}function a(e){return(0,r.jsx)("div",{className:"rounded-2xl border border-[color:var(--border)] bg-[var(--surface)] p-6",children:e.children})}},4575:(e,t,i)=>{"use strict";i.d(t,{EvaluatorEvaluationForm:()=>p});var r=i(4568),s=i(7620),l=i(4542),n=i(8648),a=i(2883),o=i(5979);let c={football:["Quarterback (QB)","Running Back (RB)","Fullback (FB)","Wide Receiver (WR)","Tight End (TE)","Center (C)","Guard (G)","Tackle (T)","Defensive Tackle (DT)","Defensive End (DE)","Linebacker (LB)","Inside Linebacker (ILB)","Outside Linebacker (OLB)","Cornerback (CB)","Free Safety (FS)","Strong Safety (SS)","Kicker (K)","Punter (P)","Long Snapper (LS)","Return Specialist (KR/PR)"],basketball:["Point Guard (PG)","Shooting Guard (SG)","Small Forward (SF)","Power Forward (PF)","Center (C)","Combo Guard","Wing","Forward"],volleyball:["Outside Hitter","Opposite Hitter","Middle Blocker","Setter","Libero","Defensive Specialist"],soccer:["Goalkeeper","Center Back","Left Back","Right Back","Wing Back","Defensive Midfielder","Central Midfielder","Attacking Midfielder","Winger","Forward","Striker"],track:["100m","200m","400m","800m","1500m","Mile","3000m","5000m","10000m","110m Hurdles","100m Hurdles","400m Hurdles","4x100m Relay","4x400m Relay","Long Jump","Triple Jump","High Jump","Pole Vault","Shot Put","Discus","Javelin","Hammer Throw","Decathlon","Heptathlon"]};function d(e){return"football"===e?"Football":"basketball"===e?"Basketball":"volleyball"===e?"Volleyball":"soccer"===e?"Soccer":"track"===e?"Track":"Other"}function u(e){let t=String(null!=e?e:"").trim().toLowerCase();return"football"===t||"basketball"===t||"volleyball"===t||"soccer"===t||"track"===t||"other"===t?t:null}function m(e){return e>=9?{label:"Elite Upside",blurb:"Rare ceiling. Impact potential with strong translatable traits."}:e>=7.5?{label:"High Upside",blurb:"Strong ceiling. Multiple high-end traits; development unlocks next level."}:e>=6?{label:"Solid",blurb:"Reliable projection. Clear role with room for targeted growth."}:{label:"Developmental",blurb:"Needs growth. Focus on 2–3 priority traits to raise the ceiling."}}function h(e){return e.toLowerCase().includes("projection")}function p(e){var t;let i=(0,n.S)(),[p,f]=(0,s.useState)(7),[v,x]=(0,s.useState)(7),[g,b]=(0,s.useState)(""),[w,y]=(0,s.useState)(""),[j,k]=(0,s.useState)(""),[N,S]=(0,s.useState)("football"),[C,P]=(0,s.useState)("Other"),[E,F]=(0,s.useState)(""),[R,O]=(0,s.useState)(null),[_,B]=(0,s.useState)(!1),[T,I]=(0,s.useState)(null),[L,M]=(0,s.useState)(null),[G,U]=(0,s.useState)(!1),[D,J]=(0,s.useState)(null),[A,W]=(0,s.useState)(!1),[H,q]=(0,s.useState)({});function Q(e){return e.split("\n").map(e=>e.trim()).filter(e=>e.startsWith("-")||e.startsWith("•")).length}let K=(0,s.useMemo)(()=>g.trim().length>=50&&Q(g)>=2,[g]),V=(0,s.useMemo)(()=>w.trim().length>=50&&Q(w)>=2,[w]),$=(0,s.useMemo)(()=>{if(!D)return!1;for(let e of D.categories)for(let t of e.traits){if(h(t.key)||!1===t.required)continue;let e=H[t.key];if(!e)return!1;if("select"===t.type){if(!e.o)return!1}else if("number"!=typeof e.n||!Number.isFinite(e.n))return!1}return!0},[D,H]),z=(0,s.useMemo)(()=>{if(!D)return[];let e=[];for(let t of D.categories)for(let i of t.traits){if(h(i.key)||!1===i.required)continue;let t=H[i.key];("select"===i.type?!!(null==t?void 0:t.o):"number"==typeof(null==t?void 0:t.n)&&Number.isFinite(null==t?void 0:t.n))||e.push(i.label)}return e},[D,H]),X=(0,s.useMemo)(()=>{let e=[];if((null==T?void 0:T.userId)||e.push("Load film details."),D||e.push("Wait for the evaluation form to load."),D&&!$){let t=z.slice(0,3);e.push(z.length>0?"Complete required rubric fields".concat(t.length?" (e.g. ".concat(t.join(", "),")"):"","."):"Complete required rubric fields.")}return K||e.push("Strengths must include 2+ bullet points and 50+ characters."),V||e.push("Improvements must include 2+ bullet points and 50+ characters."),e},[T,D,$,z,K,V]),Z=0===X.length,Y=(0,s.useMemo)(()=>"other"===N?[]:c[N],[N]);function ee(e,t){let i=e.categories,r=i.reduce((e,t)=>e+(Number(t.weight)||0),0)||100,s=0,l=0;for(let e of i){let i=[];for(let r of e.traits){if(h(r.key))continue;let e=t[r.key];if(e)if("select"===r.type){var n;let t=e.o,s=(null!=(n=r.options)?n:[]).find(e=>e.value===t);"number"==typeof(null==s?void 0:s.score)&&i.push(s.score)}else"number"==typeof e.n&&i.push(e.n)}0!==i.length&&(s+=i.reduce((e,t)=>e+t,0)/i.length*((Number(e.weight)||0)/r),l+=(Number(e.weight)||0)/r)}let a=Math.max(1,Math.min(10,l>0?s/l:7)),o=Math.max(1,Math.min(10,Math.round(a)));return{avg:a,grade:o}}function et(e,t,i){let r=Math.max(1,Math.min(10,Math.round(i))),s={...t};for(let t of e.categories)for(let e of t.traits){var l;h(e.key)&&(s[e.key]={...null!=(l=s[e.key])?l:{},n:r})}return s}let ei=(0,s.useCallback)(async e=>{W(!0);try{let t=(0,o.iD)(),i=(0,o._u)(t);if(!t)throw Error("Please login first.");if("evaluator"!==i&&"admin"!==i)throw Error("Insufficient permissions.");let r=await (0,a.n)("/evaluation-forms/active?sport=".concat(encodeURIComponent(e)),{token:t});J(r);let s={};for(let e of r.categories)for(let t of e.traits)"slider"===t.type&&(s[t.key]={n:5});let l=ee(r,s),n=et(r,s,l.avg);q(n),x(l.avg),f(l.grade)}catch(e){J(null),O(e instanceof Error?e.message:"Failed to load evaluation form")}finally{W(!1)}},[]);async function er(){O(null);let e=!0;try{var t;let r=(0,o.iD)(),s=(0,o._u)(r);if(!r)throw Error("Please login first.");if("evaluator"!==s&&"admin"!==s)throw Error("Insufficient permissions.");let l=!!(g.trim()||w.trim()||j.trim());if(e=!l,l){if(!await i({title:"Apply template?",message:"This will replace your current text in Strengths, Improvements, and Notes.",confirmText:"Apply",destructive:!0}))return;e=!0}let n=new URLSearchParams;n.set("sport",N),n.set("position","other"===N?"Other":C),E.trim()&&n.set("positionOther",E.trim());let c=await (0,a.n)("/evaluation-templates/recommend?".concat(n.toString()),{token:r});(e||!g.trim())&&b(c.template.strengthsTemplate),(e||!w.trim())&&y(c.template.improvementsTemplate),(e||!j.trim())&&k(null!=(t=c.template.notesTemplate)?t:"Template: ".concat(c.template.title)),O("Template applied (".concat(c.match,")."))}catch(i){let t=function(e,t,i){var r;let s="Other"===t||"other"===e?i||"Other":t,l={football:{s:"- Football-specific: pad level, leverage, hand placement, contact balance, play speed.",i:"- Football-specific: footwork, block/strike timing, route/coverage discipline, tackling/ball skills."},basketball:{s:"- Basketball-specific: handle under pressure, spacing, off-ball movement, finishing/shot profile.",i:"- Basketball-specific: shot mechanics consistency, defensive stance/closeouts, decision speed."},volleyball:{s:"- Volleyball-specific: approach timing, verticality, arm swing, serve/receive fundamentals.",i:"- Volleyball-specific: footwork patterns, reading hitters/blocks, serve pressure, transition speed."},soccer:{s:"- Soccer-specific: first touch, scanning, passing weight, defensive positioning, transition speed.",i:"- Soccer-specific: weak-foot development, decision speed, pressing angles, endurance/pace management."},track:{s:"- Track-specific: mechanics (posture, knee drive), rhythm, acceleration, competitive execution.",i:"- Track-specific: technical cues, starts/turns/hurdles (as applicable), strength & mobility plan."},other:{s:"- Sport-specific strengths:",i:"- Sport-specific improvements:"}},n=null!=(r=({"Quarterback (QB)":{s:"- QB: pocket movement, progression speed, accuracy layers, decision-making under pressure.",i:"- QB: footwork timing, release consistency, pre/post-snap reads, anticipation throws."},"Wide Receiver (WR)":{s:"- WR: releases, separation, hands, body control, yards-after-catch.",i:"- WR: route tempo, leverage, finishing through contact, blocking effort."},"Running Back (RB)":{s:"- RB: vision, burst, contact balance, pass pro willingness, receiving.",i:"- RB: pad level, cut efficiency, blitz pickup technique, ball security."},"Linebacker (LB)":{s:"- LB: keys/read, downhill trigger, tackling, pursuit angles, communication.",i:"- LB: coverage drops, block shedding, leverage in run fits, play-action discipline."},"Point Guard (PG)":{s:"- PG: pace control, passing vision, handle, POA defense, leadership.",i:"- PG: decision speed vs pressure, finishing package, pull-up consistency."},"Center (C)":{s:"- C: rim protection/rebounding, screens, paint presence, interior finishing.",i:"- C: footwork on defense, hands, free throws, conditioning/mobility."},Goalkeeper:{s:"- GK: positioning, shot-stopping, command of box, distribution.",i:"- GK: footwork, decision speed on crosses, communication, angles."},"100m":{s:"- Sprint: start reaction, acceleration posture, top-end mechanics.",i:"- Sprint: block setup, shin angles, relaxation at speed, strength plan."}})[s])?r:{s:"",i:""};return{strengths:["- Athleticism / movement quality:\n- Competitiveness / motor:\n- Coachability indicators (effort, response to adversity):\n- Play recognition / decision-making (where applicable):",l[e].s,n.s].filter(Boolean).join("\n"),improvements:["- Technique fundamentals to improve:\n- Consistency (rep-to-rep execution):\n- Physical development (strength, speed, mobility) goals:\n- Film study focus / situational awareness:",l[e].i,n.i].filter(Boolean).join("\n"),notes:"Sport: ".concat(d(e),"\nPosition/Event: ").concat(s).trim()}}(N,C,E);(e||!g.trim())&&b(t.strengths),(e||!w.trim())&&y(t.improvements),(e||!j.trim())&&k(e=>e.trim()?e:t.notes),O("Template applied (built-in).")}}async function es(){O(null),U(!0);try{let s=(0,o.iD)(),l=(0,o._u)(s);if(!s)throw Error("Please login first.");if("evaluator"!==l&&"admin"!==l)throw Error("Insufficient permissions.");let n=await (0,a.n)("/film-submissions/".concat(e.filmSubmissionId),{token:s});I(n);let d=await (0,a.n)("/player-profiles/player/".concat(n.userId),{token:s});M(d);let m=window;if(!m.__goed_eval_autoset__){var t,i,r;let e=null!=(t=u(d.sport))?t:"other";S(e);let s=String(null!=(i=d.position)?i:"").trim(),l=String(null!=(r=d.positionOther)?r:"").trim();"other"===e?(P("Other"),F(l||s)):s&&c[e].includes(s)?(P(s),F("")):(P("Other"),F(l||s)),m.__goed_eval_autoset__=!0}}catch(e){O(e instanceof Error?e.message:"Failed to load film metadata")}finally{U(!1)}}async function el(){O(null);try{if(!Z)return void O(X.join(" "));B(!0);let t=(0,o.iD)(),i=(0,o._u)(t);if(!t)throw Error("Please login first.");if("evaluator"!==i&&"admin"!==i)throw Error("Insufficient permissions.");if(!(null==T?void 0:T.userId))throw Error("Missing film metadata. Click 'Load details' first.");if(!D)throw Error("Missing evaluation form. Select sport to load.");await (0,a.n)("/evaluations",{method:"POST",token:t,body:JSON.stringify({filmSubmissionId:e.filmSubmissionId,sport:N,position:"other"===N?"Other":C,positionOther:("other"===N||"Other"===C)&&E||void 0,rubric:{formId:D._id,categories:D.categories.map(e=>({key:e.key,traits:e.traits.map(e=>{var t,i;return{key:e.key,..."select"===e.type?{valueOption:null==(t=H[e.key])?void 0:t.o}:{valueNumber:null==(i=H[e.key])?void 0:i.n}}})}))},strengths:g,improvements:w,notes:j||void 0})}),O("Evaluation submitted.")}catch(e){O(e instanceof Error?e.message:"Failed to submit evaluation")}finally{B(!1)}}return(0,s.useEffect)(()=>{ei(N)},[ei,N]),(0,s.useEffect)(()=>{es()},[]),(0,r.jsxs)(l.Zp,{children:[(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsxs)("div",{className:"text-sm text-white/80",children:["Film:"," ",(0,r.jsx)("span",{className:"text-white",children:T?"".concat(T.title).concat(T.opponent?" vs ".concat(T.opponent):""):"(not loaded)"})]}),(0,r.jsxs)("div",{className:"text-sm text-white/80",children:["Player:"," ",(0,r.jsx)("span",{className:"text-white",children:L?"".concat(L.firstName," ").concat(L.lastName," \xb7 ").concat(L.position," \xb7 ").concat(L.gradYear," \xb7 ").concat(L.city,", ").concat(L.state):"(not loaded)"})]}),(0,r.jsxs)("div",{className:"mt-2 flex items-center gap-3",children:[(0,r.jsx)(l.$n,{type:"button",onClick:es,disabled:G,children:G?"Loading details...":T?"Reload details":"Load details"}),(0,r.jsx)("span",{className:"text-xs text-white/60",children:"We fetch this from the API so it stays correct and secure."})]})]}),(0,r.jsxs)("div",{className:"mt-6 grid gap-4",children:[(0,r.jsxs)("div",{className:"grid gap-2 sm:grid-cols-2",children:[(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(l.JU,{htmlFor:"sport",children:"Sport"}),(0,r.jsxs)("select",{id:"sport",className:"w-full rounded-md border border-white/10 bg-white/5 px-3 py-2 text-sm text-white/90 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/60",value:N,onChange:e=>{let t=e.target.value;S(t),P("Other"),F(""),ei(t)},children:[(0,r.jsx)("option",{value:"football",children:"Football"}),(0,r.jsx)("option",{value:"basketball",children:"Basketball"}),(0,r.jsx)("option",{value:"volleyball",children:"Volleyball"}),(0,r.jsx)("option",{value:"soccer",children:"Soccer"}),(0,r.jsx)("option",{value:"track",children:"Track"}),(0,r.jsx)("option",{value:"other",children:"Other (enter manually)"})]}),(0,r.jsxs)("div",{className:"text-xs text-white/60",children:[A?"Loading form...":D?"Form: ".concat(D.title):"Form not loaded yet.",D?" \xb7 Selected: ".concat(d(N)," \xb7 Loaded: ").concat(d(null!=(t=u(D.sport))?t:N)):""]})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(l.JU,{htmlFor:"position",children:"Position / Event"}),"other"===N?(0,r.jsx)(l.pd,{id:"position",value:E,onChange:e=>F(e.target.value),placeholder:"Enter position/event..."}):(0,r.jsxs)("select",{id:"position",className:"w-full rounded-md border border-white/10 bg-white/5 px-3 py-2 text-sm text-white/90 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/60",value:C,onChange:e=>{P(e.target.value),"Other"!==e.target.value&&F("")},children:[Y.map(e=>(0,r.jsx)("option",{value:e,children:e},e)),(0,r.jsx)("option",{value:"Other",children:"Other (enter manually)"})]}),"other"!==N&&"Other"===C?(0,r.jsx)(l.pd,{id:"positionOther",value:E,onChange:e=>F(e.target.value),placeholder:"Enter position/event..."}):null]})]}),D?(0,r.jsxs)("div",{className:"mt-2 rounded-2xl border border-white/10 bg-white/5 p-4",children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-baseline justify-between gap-2",children:[(0,r.jsx)("div",{className:"text-sm font-semibold text-white",children:"Rubric (required)"}),(0,r.jsxs)("div",{className:"text-sm text-white/80",children:["Overall grade (auto): ",(0,r.jsxs)("span",{className:"font-semibold text-white",children:[p,"/10"]})]})]}),(0,r.jsxs)("div",{className:"mt-3 rounded-xl border border-white/10 bg-white/5 p-4",children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-baseline justify-between gap-2",children:[(0,r.jsx)("div",{className:"text-sm font-semibold text-white",children:"Average score"}),(0,r.jsxs)("div",{className:"text-sm text-white/80",children:[(0,r.jsx)("span",{className:"font-semibold text-white",children:v.toFixed(1)}),"/10"]})]}),(0,r.jsxs)("div",{className:"mt-2",children:[(0,r.jsxs)("div",{className:"relative h-3 w-full overflow-hidden rounded-full border border-white/10 bg-white/5",children:[(0,r.jsx)("div",{className:"absolute inset-0",style:{background:"linear-gradient(90deg, rgba(239,68,68,.85) 0%, rgba(245,158,11,.85) 35%, rgba(99,102,241,.9) 70%, rgba(16,185,129,.9) 100%)"}}),(0,r.jsx)("div",{className:"absolute top-0 h-full w-1 rounded-full bg-white",style:{left:"".concat(Math.max(0,Math.min(100,(v-1)/9*100)),"%")},"aria-hidden":!0})]}),(0,r.jsxs)("div",{className:"mt-2 flex items-center justify-between text-[11px] text-white/60",children:[(0,r.jsx)("span",{children:"1"}),(0,r.jsx)("span",{children:"4"}),(0,r.jsx)("span",{children:"6"}),(0,r.jsx)("span",{children:"8"}),(0,r.jsx)("span",{children:"10"})]})]}),(0,r.jsx)("div",{className:"mt-3 rounded-xl border border-white/10 bg-white/5 p-3",children:(()=>{let e=m(v);return(0,r.jsxs)("div",{className:"text-sm text-white/90",children:[(0,r.jsxs)("div",{className:"font-semibold text-white",children:["Suggested projection: ",e.label]}),(0,r.jsx)("div",{className:"mt-1 text-xs text-white/70",children:e.blurb})]})})()})]}),(0,r.jsx)("div",{className:"mt-4 grid gap-4",children:D.categories.map(e=>(0,r.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-4",children:[(0,r.jsxs)("div",{className:"flex items-baseline justify-between gap-3",children:[(0,r.jsx)("div",{className:"font-semibold text-white",children:e.label}),(0,r.jsxs)("div",{className:"text-xs text-white/60",children:["Weight: ",e.weight,"%"]})]}),(0,r.jsx)("div",{className:"mt-3 grid gap-3",children:e.traits.map(e=>{var t,i,s,l,n,a,o,c,d,u,p,g,b;return(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsxs)("div",{className:"flex flex-wrap items-center justify-between gap-2",children:[(0,r.jsxs)("div",{className:"text-sm text-white/90",children:[e.label," ",!1===e.required?(0,r.jsx)("span",{className:"text-white/60",children:"(optional)"}):null]}),h(e.key)?(0,r.jsxs)("div",{className:"text-xs text-white/70",children:[m(v).label," \xb7 ",Math.round(v),"/10"]}):"slider"===e.type?(0,r.jsxs)("div",{className:"text-xs text-white/70",children:["Score: ",null!=(a=null==(t=H[e.key])?void 0:t.n)?a:"—","number"==typeof(null==(i=H[e.key])?void 0:i.n)&&e.key.toLowerCase().includes("projection")?" \xb7 ".concat((b=H[e.key].n)>=9?"Elite Upside":b>=7?"High Upside":b>=5?"Solid":"Developmental"):""]}):(0,r.jsxs)("div",{className:"text-xs text-white/70",children:["Selected: ",null!=(o=null==(s=H[e.key])?void 0:s.o)?o:"—"]})]}),h(e.key)?(0,r.jsxs)("div",{className:"rounded-md border border-white/10 bg-white/5 px-3 py-2 text-sm text-white/90",children:[(0,r.jsx)("span",{className:"font-semibold",children:m(v).label})," ",(0,r.jsxs)("span",{className:"text-white/70",children:["(",Math.round(v),"/10)"]})]}):"slider"===e.type?(0,r.jsx)("select",{className:"w-full rounded-md border border-white/10 bg-white/5 px-3 py-2 text-sm text-white/90 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/60",value:String(null!=(c=null==(l=H[e.key])?void 0:l.n)?c:5),onChange:t=>{let i=Number(t.target.value);q(t=>{var r;let s={...t,[e.key]:{...null!=(r=t[e.key])?r:{},n:i}},l=ee(D,s),n=et(D,s,l.avg);return x(l.avg),f(l.grade),n})},children:Array.from({length:(null!=(d=e.max)?d:10)-(null!=(u=e.min)?u:1)+1},(t,i)=>{var r;return(null!=(r=e.min)?r:1)+i}).map(e=>(0,r.jsx)("option",{value:String(e),children:e},e))}):(0,r.jsxs)("select",{className:"w-full rounded-md border border-white/10 bg-white/5 px-3 py-2 text-sm text-white/90 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/60",value:null!=(p=null==(n=H[e.key])?void 0:n.o)?p:"",onChange:t=>{let i=t.target.value;q(t=>{var r;let s={...t,[e.key]:{...null!=(r=t[e.key])?r:{},o:i}},l=ee(D,s),n=et(D,s,l.avg);return x(l.avg),f(l.grade),n})},children:[(0,r.jsx)("option",{value:"",children:"Select…"}),(null!=(g=e.options)?g:[]).map(e=>(0,r.jsx)("option",{value:e.value,children:e.label},e.value))]}),e.description?(0,r.jsx)("div",{className:"text-xs text-white/60",children:e.description}):null]},e.key)})})]},e.key))})]}):null,(0,r.jsxs)("div",{className:"flex flex-wrap items-center gap-3",children:[(0,r.jsx)(l.$n,{type:"button",className:"border border-white/15 bg-white/5 text-white hover:bg-white/10",onClick:er,children:"Apply template"}),(0,r.jsx)("span",{className:"text-xs text-white/60",children:"Pulls the best admin template for the selected sport/position (fallback included)."})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(l.JU,{htmlFor:"grade",children:"Overall grade (1-10)"}),(0,r.jsx)(l.pd,{id:"grade",type:"number",min:1,max:10,value:p,disabled:!0}),(0,r.jsx)("div",{className:"text-xs text-white/60",children:"Auto-calculated from rubric scores above."})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(l.JU,{htmlFor:"strengths",children:"Strengths"}),D?(0,r.jsx)("div",{className:"text-xs text-white/60 whitespace-pre-wrap",children:D.strengthsPrompt}):null,(0,r.jsx)("textarea",{id:"strengths",className:"min-h-28 w-full rounded-md border border-white/10 bg-white/5 px-3 py-2 text-sm text-white/90 placeholder:text-white/40 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/60",value:g,onChange:e=>b(e.target.value),placeholder:"- Strength 1 (evidence)\\n- Strength 2 (evidence)\\n- Strength 3 (optional)"}),K?null:(0,r.jsx)("div",{className:"text-xs text-amber-300",children:"Required: at least 2 bullet points and 50+ characters."})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(l.JU,{htmlFor:"improvements",children:"Improvements"}),D?(0,r.jsx)("div",{className:"text-xs text-white/60 whitespace-pre-wrap",children:D.improvementsPrompt}):null,(0,r.jsx)("textarea",{id:"improvements",className:"min-h-28 w-full rounded-md border border-white/10 bg-white/5 px-3 py-2 text-sm text-white/90 placeholder:text-white/40 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/60",value:w,onChange:e=>y(e.target.value),placeholder:"- Improvement 1 (how to improve)\\n- Improvement 2 (how to improve)\\n- Improvement 3 (optional)"}),V?null:(0,r.jsx)("div",{className:"text-xs text-amber-300",children:"Required: at least 2 bullet points and 50+ characters."})]}),(0,r.jsxs)("div",{className:"grid gap-2",children:[(0,r.jsx)(l.JU,{htmlFor:"notes",children:"Notes (optional)"}),(null==D?void 0:D.notesHelp)?(0,r.jsx)("div",{className:"text-xs text-white/60 whitespace-pre-wrap",children:D.notesHelp}):null,(0,r.jsx)("textarea",{id:"notes",className:"min-h-28 w-full rounded-md border border-white/10 bg-white/5 px-3 py-2 text-sm text-white/90 placeholder:text-white/40 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/60",value:j,onChange:e=>k(e.target.value)})]})]}),(0,r.jsxs)("div",{className:"mt-6 flex items-center gap-3",children:[(0,r.jsx)(l.$n,{type:"button",onClick:el,disabled:_,children:_?"Submitting...":"Submit evaluation"}),Z?null:(0,r.jsxs)("p",{className:"text-sm text-amber-200",children:["To submit: ",X.join(" ")]}),R?(0,r.jsx)("p",{className:"text-sm text-white/80",children:R}):null]})]})}},5979:(e,t,i)=>{"use strict";i.d(t,{QG:()=>a,_u:()=>n,bZ:()=>c,iD:()=>s,ki:()=>o});let r="goeducate_access_token";function s(){return window.localStorage.getItem(r)}function l(e){let t="=".repeat((4-e.length%4)%4);return decodeURIComponent(atob((e+t).replace(/-/g,"+").replace(/_/g,"/")).split("").map(e=>"%".concat(e.charCodeAt(0).toString(16).padStart(2,"0"))).join(""))}function n(e){if(!e)return null;let t=e.split(".");if(3!==t.length)return null;try{var i;let e=JSON.parse(l(null!=(i=t[1])?i:""));return"string"==typeof(null==e?void 0:e.role)?e.role:null}catch(e){return null}}function a(e){if(!e)return null;let t=e.split(".");if(3!==t.length)return null;try{var i;let e=JSON.parse(l(null!=(i=t[1])?i:""));return"string"==typeof(null==e?void 0:e.sub)?e.sub:null}catch(e){return null}}function o(e){window.localStorage.setItem(r,e)}function c(){window.localStorage.removeItem(r)}},7541:(e,t,i)=>{"use strict";var r=i(3041);i.o(r,"useParams")&&i.d(t,{useParams:function(){return r.useParams}}),i.o(r,"usePathname")&&i.d(t,{usePathname:function(){return r.usePathname}}),i.o(r,"useRouter")&&i.d(t,{useRouter:function(){return r.useRouter}}),i.o(r,"useSearchParams")&&i.d(t,{useSearchParams:function(){return r.useSearchParams}})},8648:(e,t,i)=>{"use strict";i.d(t,{ConfirmProvider:()=>n,S:()=>a});var r=i(4568),s=i(7620);let l=(0,s.createContext)(null);function n(e){let[t,i]=(0,s.useState)({open:!1,title:"Confirm",message:"",confirmText:"Confirm",cancelText:"Cancel",destructive:!1}),n=(0,s.useMemo)(()=>e=>new Promise(t=>{var r,s,l;i({open:!0,title:null!=(r=e.title)?r:"Confirm",message:e.message,confirmText:null!=(s=e.confirmText)?s:"Confirm",cancelText:null!=(l=e.cancelText)?l:"Cancel",destructive:!!e.destructive,resolve:t})}),[]);function a(e){let r=t.resolve;i(e=>({...e,open:!1,resolve:void 0})),null==r||r(e)}return(0,r.jsxs)(l.Provider,{value:n,children:[e.children,t.open?(0,r.jsxs)("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[(0,r.jsx)("div",{className:"absolute inset-0 bg-black/70",onClick:()=>a(!1)}),(0,r.jsxs)("div",{className:"relative w-full max-w-lg rounded-2xl border border-[color:var(--border)] bg-[var(--surface)] p-6 shadow-2xl",children:[(0,r.jsx)("div",{className:"text-lg font-semibold text-[color:var(--foreground)]",children:t.title}),(0,r.jsx)("p",{className:"mt-2 whitespace-pre-wrap text-sm text-[color:var(--muted)]",children:t.message}),(0,r.jsxs)("div",{className:"mt-6 flex flex-wrap justify-end gap-3",children:[(0,r.jsx)("button",{type:"button",className:"rounded-md border border-[color:var(--border)] bg-[var(--surface-soft)] px-4 py-2 text-sm font-medium text-[color:var(--foreground)] hover:bg-[var(--surface)] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/60",onClick:()=>a(!1),children:t.cancelText}),(0,r.jsx)("button",{type:"button",className:"rounded-md px-4 py-2 text-sm font-medium ".concat(t.destructive?"bg-red-500 text-white hover:bg-red-600 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/60":"bg-indigo-600 text-white hover:bg-indigo-500 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-white/60"),onClick:()=>a(!0),children:t.confirmText})]})]})]}):null]})}function a(){let e=(0,s.useContext)(l);if(!e)throw Error("useConfirm must be used within ConfirmProvider");return e}},9754:(e,t,i)=>{"use strict";i.d(t,{EvaluatorGuard:()=>l});var r=i(4568),s=i(3996);function l(e){return(0,r.jsx)(s.RoleGuard,{allowed:["evaluator","admin"],children:e.children})}}},e=>{e.O(0,[664,587,18,358],()=>e(e.s=623)),_N_E=e.O()}]);