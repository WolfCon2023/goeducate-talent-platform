(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[470],{2883:(e,t,r)=>{"use strict";r.d(t,{X:()=>n,n:()=>a});var s=r(7011);class n extends Error{constructor(e){super(e.message),this.name="ApiFetchError",this.status=e.status,this.code=e.code,this.details=e.details}}async function a(e,t){var r,a,l,i,o;let c=function(){let e=s.env.NEXT_PUBLIC_API_URL;if(!e)throw Error("Missing NEXT_PUBLIC_API_URL");return e.replace(/\/+$/,"")}(),u=new Headers(null==t?void 0:t.headers);u.set("content-type","application/json"),(null==t?void 0:t.token)&&u.set("authorization","Bearer ".concat(t.token));let d=await fetch("".concat(c).concat(e),{...t,headers:u,cache:"no-store"});if(!d.ok){let e=await d.json().catch(()=>({}));throw new n({message:null!=(i=null==(r=e.error)?void 0:r.message)?i:"Request failed: ".concat(d.status),status:d.status,code:null==(a=e.error)?void 0:a.code,details:null==(l=e.error)?void 0:l.details})}if(204===d.status)return;if(!(null!=(o=d.headers.get("content-type"))?o:"").includes("application/json")){let e=await d.text();if(!e)return;return e}let h=await d.text();if(h)return JSON.parse(h)}},3996:(e,t,r)=>{"use strict";r.d(t,{RoleGuard:()=>o});var s=r(4568),n=r(7541),a=r(7620),l=r(5979);let i={player:"/player",coach:"/coach",evaluator:"/evaluator",admin:"/admin"};function o(e){return!0!==function(e){let t=(0,n.useRouter)(),[r,s]=(0,a.useState)(null),o=e.join(",");return(0,a.useEffect)(()=>{let e=(0,l.iD)(),r=(0,l._u)(e);if(!e||!r){s(!1),t.push("/login");return}if(!new Set(o.split(",").filter(Boolean)).has(r)){var n;s(!1),t.push(null!=(n=i[r])?n:"/");return}s(!0)},[t,o]),r}(e.allowed)?null:(0,s.jsx)(s.Fragment,{children:e.children})}},4542:(e,t,r)=>{"use strict";r.d(t,{$n:()=>n,JU:()=>l,Zp:()=>i,pd:()=>a});var s=r(4568);function n(e){let{className:t="",...r}=e;return(0,s.jsx)("button",{className:"rounded-md bg-indigo-600 px-4 py-2 text-sm font-medium text-white hover:bg-indigo-500 disabled:opacity-60 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--color-primary-600)] ".concat(t),...r})}function a(e){let{className:t="",...r}=e;return(0,s.jsx)("input",{className:"w-full rounded-md border border-[color:var(--border)] bg-[var(--surface-soft)] px-3 py-2 text-sm text-[color:var(--foreground)] placeholder:text-[color:var(--muted-3)] focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-[color:var(--color-primary-600)] ".concat(t),...r})}function l(e){return(0,s.jsx)("label",{htmlFor:e.htmlFor,className:"text-sm font-medium text-[color:var(--muted)]",children:e.children})}function i(e){return(0,s.jsx)("div",{className:"rounded-2xl border border-[color:var(--border)] bg-[var(--surface)] p-6",children:e.children})}},5979:(e,t,r)=>{"use strict";r.d(t,{QG:()=>i,_u:()=>l,bZ:()=>c,iD:()=>n,ki:()=>o});let s="goeducate_access_token";function n(){return window.localStorage.getItem(s)}function a(e){let t="=".repeat((4-e.length%4)%4);return decodeURIComponent(atob((e+t).replace(/-/g,"+").replace(/_/g,"/")).split("").map(e=>"%".concat(e.charCodeAt(0).toString(16).padStart(2,"0"))).join(""))}function l(e){if(!e)return null;let t=e.split(".");if(3!==t.length)return null;try{var r;let e=JSON.parse(a(null!=(r=t[1])?r:""));return"string"==typeof(null==e?void 0:e.role)?e.role:null}catch(e){return null}}function i(e){if(!e)return null;let t=e.split(".");if(3!==t.length)return null;try{var r;let e=JSON.parse(a(null!=(r=t[1])?r:""));return"string"==typeof(null==e?void 0:e.sub)?e.sub:null}catch(e){return null}}function o(e){window.localStorage.setItem(s,e)}function c(){window.localStorage.removeItem(s)}},6080:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>h});var s=r(4568),n=r(9664),a=r.n(n),l=r(7620),i=r(4542),o=r(2883),c=r(5979),u=r(8267);function d(e){return e?new Date(e).toLocaleString():"TBD"}function h(){let[e,t]=(0,l.useState)(!1),[r,n]=(0,l.useState)(null),[h,m]=(0,l.useState)([]);(0,l.useEffect)(()=>{let e=!1;return async function(){n(null),t(!0);try{var r;let t=(0,c.iD)();if(!t)throw Error("Please login first.");let s=await (0,o.n)("/showcase-registrations/me",{token:t});e||m(null!=(r=s.results)?r:[])}catch(t){e||n(t instanceof Error?t.message:"Failed to load registrations")}finally{e||t(!1)}}(),()=>{e=!0}},[]);let x=(0,l.useMemo)(()=>!e&&!r&&0===h.length,[e,r,h.length]);return(0,s.jsx)(u.U,{children:(0,s.jsxs)("div",{className:"grid gap-8",children:[(0,s.jsx)("section",{className:"rounded-2xl border border-white/10 bg-[var(--surface)] p-10",children:(0,s.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[(0,s.jsxs)("div",{className:"max-w-3xl",children:[(0,s.jsx)("h1",{className:"text-balance text-4xl font-semibold tracking-tight",children:"My registrations"}),(0,s.jsx)("p",{className:"mt-3 text-lg text-white/90",children:"Your showcase registration history."})]}),(0,s.jsx)(a(),{href:"/showcases",className:"text-sm text-indigo-300 hover:text-indigo-200 hover:underline",children:"Back to showcases"})]})}),r?(0,s.jsx)(i.Zp,{children:(0,s.jsx)("p",{className:"text-sm text-red-300",children:r})}):null,e?(0,s.jsx)(i.Zp,{children:(0,s.jsx)("p",{className:"text-sm text-white/80",children:"Loading registrations..."})}):null,x?(0,s.jsxs)(i.Zp,{children:[(0,s.jsx)("h2",{className:"text-lg font-semibold",children:"No registrations yet."}),(0,s.jsx)("p",{className:"mt-2 text-sm text-white/80",children:"When you register for a showcase, it will appear here."}),(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)(a(),{href:"/showcases",children:(0,s.jsx)(i.$n,{type:"button",children:"Browse showcases"})})})]}):null,h.length?(0,s.jsx)("div",{className:"grid gap-4",children:h.map(e=>{var t,r;let n=e.showcase,l=null!=(t=null==n?void 0:n.slug)?t:null==n?void 0:n._id;return(0,s.jsxs)("div",{className:"rounded-2xl border border-white/10 bg-white/5 p-5",children:[(0,s.jsxs)("div",{className:"flex flex-wrap items-start justify-between gap-3",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"text-base font-semibold text-white",children:null!=(r=null==n?void 0:n.title)?r:"Showcase"}),(0,s.jsxs)("div",{className:"mt-1 text-sm text-white/80",children:[(null==n?void 0:n.city)?"".concat(n.city,", ").concat(n.state):"Location TBD"," ",(null==n?void 0:n.locationName)?"\xb7 ".concat(n.locationName):""]}),(0,s.jsxs)("div",{className:"mt-1 text-sm text-white/80",children:[d(null==n?void 0:n.startDateTime)," ",(null==n?void 0:n.endDateTime)?"â€“ ".concat(d(n.endDateTime)):""]}),(0,s.jsxs)("div",{className:"mt-2 text-xs text-white/70",children:["Registered: ",d(e.createdAt)]})]}),(0,s.jsx)("div",{className:"rounded-full border px-2 py-0.5 text-xs font-semibold ".concat(function(e){let t=(e||"").toLowerCase();return"paid"===t?"border-emerald-400/30 bg-emerald-500/10 text-emerald-200":"refunded"===t?"border-amber-400/30 bg-amber-500/10 text-amber-200":"failed"===t?"border-red-400/30 bg-red-500/10 text-red-200":"border-white/10 bg-white/5 text-white/70"}(e.paymentStatus)),children:(e.paymentStatus||"pending").toUpperCase()})]}),l?(0,s.jsx)("div",{className:"mt-4",children:(0,s.jsx)(a(),{href:"/showcases/".concat(encodeURIComponent(l)),className:"text-sm text-indigo-300 hover:text-indigo-200 hover:underline",children:"View showcase"})}):null]},e.id)})}):null]})})}},7541:(e,t,r)=>{"use strict";var s=r(3041);r.o(s,"useParams")&&r.d(t,{useParams:function(){return s.useParams}}),r.o(s,"usePathname")&&r.d(t,{usePathname:function(){return s.usePathname}}),r.o(s,"useRouter")&&r.d(t,{useRouter:function(){return s.useRouter}}),r.o(s,"useSearchParams")&&r.d(t,{useSearchParams:function(){return s.useSearchParams}})},8267:(e,t,r)=>{"use strict";r.d(t,{U:()=>a});var s=r(4568),n=r(3996);function a(e){return(0,s.jsx)(n.RoleGuard,{allowed:["player","coach","evaluator","admin"],children:e.children})}},9462:(e,t,r)=>{Promise.resolve().then(r.bind(r,6080))}},e=>{e.O(0,[664,587,18,358],()=>e(e.s=9462)),_N_E=e.O()}]);